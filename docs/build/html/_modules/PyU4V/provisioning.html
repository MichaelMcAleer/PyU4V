

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PyU4V.provisioning &mdash; PyU4V 9.1.3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PyU4V
          

          
          </a>

          
            
            
              <div class="version">
                9.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quick_start.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recommendations.html">PyU4V Usage Recommendations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contribute.html">Contribute to PyU4V</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support.html">Issues &amp; Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programmers_guide.html">Programmers Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools.html">Tools Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">API Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyU4V</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>PyU4V.provisioning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for PyU4V.provisioning</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright (c) 2019 Dell Inc. or its subsidiaries.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#        http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="sd">&quot;&quot;&quot;provisioning.py.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">PyU4V.common</span> <span class="k">import</span> <span class="n">CommonFunctions</span>
<span class="kn">from</span> <span class="nn">PyU4V.utils</span> <span class="k">import</span> <span class="n">constants</span>
<span class="kn">from</span> <span class="nn">PyU4V.utils</span> <span class="k">import</span> <span class="n">decorators</span>
<span class="kn">from</span> <span class="nn">PyU4V.utils</span> <span class="k">import</span> <span class="n">exception</span>
<span class="kn">from</span> <span class="nn">PyU4V.utils</span> <span class="k">import</span> <span class="n">file_handler</span>

<span class="n">LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="c1"># Resource constants</span>
<span class="n">SLOPROVISIONING</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SLOPROVISIONING</span>
<span class="n">CREATE_VOL_STRING</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">CREATE_VOL_STRING</span>
<span class="n">ASYNC_UPDATE</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">ASYNC_UPDATE</span>
<span class="n">SYSTEM</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SYSTEM</span>
<span class="n">SYMMETRIX</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SYMMETRIX</span>
<span class="n">DIRECTOR</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">DIRECTOR</span>
<span class="n">PORT</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">PORT</span>
<span class="n">HOST</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">HOST</span>
<span class="n">HOSTGROUP</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">HOSTGROUP</span>
<span class="n">INITIATOR</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">INITIATOR</span>
<span class="n">MASKINGVIEW</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">MASKINGVIEW</span>
<span class="n">CONNECTIONS</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">CONNECTIONS</span>
<span class="n">PORTGROUP</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">PORTGROUP</span>
<span class="n">SLO</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SLO</span>
<span class="n">SRP</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SRP</span>
<span class="n">COMPRESSIBILITY_REPORT</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">COMPRESSIBILITY_REPORT</span>
<span class="n">STORAGEGROUP</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">STORAGEGROUP</span>
<span class="n">SG_DEMAND_REPORT</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SG_DEMAND_REPORT</span>
<span class="n">VOLUME</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">VOLUME</span>
<span class="n">WORKLOADTYPE</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">WORKLOADTYPE</span>


<div class="viewcode-block" id="ProvisioningFunctions"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions">[docs]</a><span class="k">class</span> <span class="nc">ProvisioningFunctions</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;ProvisioningFunctions.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array_id</span><span class="p">,</span> <span class="n">rest_client</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;__init__.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">array_id</span> <span class="o">=</span> <span class="n">array_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">common</span> <span class="o">=</span> <span class="n">CommonFunctions</span><span class="p">(</span><span class="n">rest_client</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">get_resource</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">create_resource</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">modify_resource</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">delete_resource</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_director"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_director">[docs]</a>    <span class="k">def</span> <span class="nf">get_director</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query for details of a director for a symmetrix.</span>

<span class="sd">        :param director: the director ID e.g. FA-1D -- str</span>
<span class="sd">        :returns: director details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SYSTEM</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DIRECTOR</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">director</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_director_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_director_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_director_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query for details of Symmetrix directors for a symmetrix.</span>

<span class="sd">        :returns: directors -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SYSTEM</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DIRECTOR</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;directorId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_director_port"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_director_port">[docs]</a>    <span class="k">def</span> <span class="nf">get_director_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director</span><span class="p">,</span> <span class="n">port_no</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details of the symmetrix director port.</span>

<span class="sd">        :param director: the director ID e.g. FA-1D -- str</span>
<span class="sd">        :param port_no: the port number e.g. 1 -- str</span>
<span class="sd">        :returns: director port details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SYSTEM</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DIRECTOR</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">director</span><span class="p">,</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">PORT</span><span class="p">,</span> <span class="n">resource_id</span><span class="o">=</span><span class="n">port_no</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_director_port_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_director_port_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_director_port_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of the ports on a particular director.</span>

<span class="sd">        Can be filtered by optional parameters, please see documentation.</span>

<span class="sd">        :param director: the director ID e.g. FA-1D -- str</span>
<span class="sd">        :param filters: optional filters - dict</span>
<span class="sd">        :returns: port key dicts -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SYSTEM</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">DIRECTOR</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">director</span><span class="p">,</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">PORT</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="n">port_key_list</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">port_key_list</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_identifier"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_identifier">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director</span><span class="p">,</span> <span class="n">port_no</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the identifier (wwn) of the physical port.</span>

<span class="sd">        :param director: the id of the director -- str</span>
<span class="sd">        :param port_no: the number of the port -- str</span>
<span class="sd">        :returns: wwn (FC) or iqn (iscsi) -- str or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wwn</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">port_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_director_port</span><span class="p">(</span><span class="n">director</span><span class="p">,</span> <span class="n">port_no</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port_info</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">wwn</span> <span class="o">=</span> <span class="n">port_info</span><span class="p">[</span><span class="s1">&#39;symmetrixPort&#39;</span><span class="p">][</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Cannot retrieve port information.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wwn</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_host">[docs]</a>    <span class="k">def</span> <span class="nf">get_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a host on the array.</span>

<span class="sd">        :param host_id: the name of the host -- str</span>
<span class="sd">        :returns: host details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_host_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_host_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_host_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of the hosts on the array.</span>

<span class="sd">        See documentation for applicable filters.</span>

<span class="sd">        :param filters: optional list of filters -- dict</span>
<span class="sd">        :returns: hosts -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hostId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.create_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_host">[docs]</a>    <span class="k">def</span> <span class="nf">create_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_name</span><span class="p">,</span> <span class="n">initiator_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">host_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">init_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a host with the given initiators.</span>

<span class="sd">        Accepts either initiator_list, e.g.</span>
<span class="sd">        [10000000ba873cbf, 10000000ba873cba], or file.</span>
<span class="sd">        The initiators must not be associated with another host.</span>
<span class="sd">        An empty host can also be created by not passing any initiator ids.</span>

<span class="sd">        :param host_name: name of the new host -- str</span>
<span class="sd">        :param initiator_list: list of initiators -- list</span>
<span class="sd">        :param host_flags: optional host flags to apply -- dict</span>
<span class="sd">        :param init_file: path to file containing initiator names -- str</span>
<span class="sd">        :param _async: if call should be _async -- bool</span>
<span class="sd">        :returns: new host details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">init_file</span><span class="p">:</span>
            <span class="n">initiator_list</span> <span class="o">=</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">create_list_from_file</span><span class="p">(</span><span class="n">init_file</span><span class="p">)</span>
        <span class="n">new_ig_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hostId&#39;</span><span class="p">:</span> <span class="n">host_name</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">initiator_list</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">initiator_list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_ig_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;initiatorId&#39;</span><span class="p">:</span> <span class="n">initiator_list</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">host_flags</span><span class="p">:</span>
            <span class="n">new_ig_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;hostFlags&#39;</span><span class="p">:</span> <span class="n">host_flags</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">new_ig_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">new_ig_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.modify_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_host">[docs]</a>    <span class="k">def</span> <span class="nf">modify_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">,</span> <span class="n">host_flag_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                    <span class="n">remove_init_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_init_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an existing host.</span>

<span class="sd">        Only one parameter can be modified at a time.</span>

<span class="sd">        :param host_id: host name -- str</span>
<span class="sd">        :param host_flag_dict: host flags -- dict</span>
<span class="sd">        :param remove_init_list: initiators to be removed -- list</span>
<span class="sd">        :param add_init_list: initiators to be added -- list</span>
<span class="sd">        :param new_name: new host name -- str</span>
<span class="sd">        :returns: modified host details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">host_flag_dict</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;setHostFlagsParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostFlags&#39;</span><span class="p">:</span> <span class="n">host_flag_dict</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">remove_init_list</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;removeInitiatorParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;initiator&#39;</span><span class="p">:</span> <span class="n">remove_init_list</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">add_init_list</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;addInitiatorParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;initiator&#39;</span><span class="p">:</span> <span class="n">add_init_list</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;renameHostParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;new_host_name&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">}}})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;No modify host parameters chosen - please supply one &#39;</span>
                   <span class="s1">&#39;of the following: host_flag_dict, remove_init_list, &#39;</span>
                   <span class="s1">&#39;add_init_list, or new_name.&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">edit_host_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.delete_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_host">[docs]</a>    <span class="k">def</span> <span class="nf">delete_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a given host.</span>

<span class="sd">        Cannot delete if associated with a masking view.</span>

<span class="sd">        :param host_id: name of the host -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOST</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_id</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_masking_views_from_host&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_mvs_from_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve masking view information for a specified host.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_mvs_from_host() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_masking_views_from_host(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param host_id: name of the host -- str</span>
<span class="sd">        :returns: masking views -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_views_from_host</span><span class="p">(</span><span class="n">host_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_views_from_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_views_from_host">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_views_from_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve masking view information for a specified host.</span>

<span class="sd">        :param host_id: name of the host -- str</span>
<span class="sd">        :returns: masking views -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host</span><span class="p">(</span><span class="n">host_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">host</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maskingview&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">host</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_initiator_ids_from_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_initiator_ids_from_host">[docs]</a>    <span class="k">def</span> <span class="nf">get_initiator_ids_from_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get initiator details from a host.</span>

<span class="sd">        :param host_id: name of the host -- str</span>
<span class="sd">        :returns: initiator IDs -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host</span><span class="p">(</span><span class="n">host_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">host</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;initiator&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">host</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_host_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_hostgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a host group on the array.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_hostgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_host_group(). For further information please</span>
<span class="sd">        consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param hostgroup_id: name of the host group -- str</span>
<span class="sd">        :returns: host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host_group</span><span class="p">(</span><span class="n">hostgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_host_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_host_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_host_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a host group on the array.</span>

<span class="sd">        :param host_group_id: name of the host group -- str</span>
<span class="sd">        :returns: host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOSTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_group_id</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_host_group_list&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_hostgroup_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of host group(s) on the array.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_hostgroup_list() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_host_group_list(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        See unisphere documentation for applicable filters.</span>

<span class="sd">        :param filters: optional list of filters -- dict</span>
<span class="sd">        :returns: host group list -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host_group_list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_host_group_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_host_group_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_host_group_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of host group(s) on the array.</span>

<span class="sd">        See unisphere documentation for applicable filters.</span>

<span class="sd">        :param filters: optional list of filters -- dict</span>
<span class="sd">        :returns: host group list -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOSTGROUP</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hostGroupId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_host_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_hostgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostgroup_id</span><span class="p">,</span> <span class="n">host_list</span><span class="p">,</span>
                         <span class="n">host_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a host group containing the given hosts.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.create_hostgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_host_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param hostgroup_id: name of the new host group -- str</span>
<span class="sd">        :param host_list: hosts -- list</span>
<span class="sd">        :param host_flags: optional host flags to apply -- dict</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: new host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_host_group</span><span class="p">(</span>
            <span class="n">hostgroup_id</span><span class="p">,</span> <span class="n">host_list</span><span class="p">,</span> <span class="n">host_flags</span><span class="p">,</span> <span class="n">_async</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_host_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_host_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_host_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_group_id</span><span class="p">,</span> <span class="n">host_list</span><span class="p">,</span>
                          <span class="n">host_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a host group containing the given hosts.</span>

<span class="sd">        :param host_group_id: name of the new host group -- str</span>
<span class="sd">        :param host_list: hosts -- list</span>
<span class="sd">        :param host_flags: optional host flags to apply -- dict</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: new host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_ig_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;hostId&#39;</span><span class="p">:</span> <span class="n">host_list</span><span class="p">,</span> <span class="s1">&#39;hostGroupId&#39;</span><span class="p">:</span> <span class="n">host_group_id</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">host_flags</span><span class="p">:</span>
            <span class="n">new_ig_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;hostFlags&#39;</span><span class="p">:</span> <span class="n">host_flags</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">new_ig_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOSTGROUP</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">new_ig_data</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.modify_host_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">modify_hostgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostgroup_id</span><span class="p">,</span> <span class="n">host_flag_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">remove_host_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_host_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">new_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an existing host group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.modify_hostgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.modify_host_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Only one parameter can be modified at a time.</span>

<span class="sd">        :param hostgroup_id: name of the host group -- str</span>
<span class="sd">        :param host_flag_dict: host flags -- dict</span>
<span class="sd">        :param remove_host_list: hosts to be removed -- list</span>
<span class="sd">        :param add_host_list: hosts to be added -- list</span>
<span class="sd">        :param new_name: new name of the host group -- str</span>
<span class="sd">        :returns: modified host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_host_group</span><span class="p">(</span>
            <span class="n">hostgroup_id</span><span class="p">,</span> <span class="n">host_flag_dict</span><span class="p">,</span> <span class="n">remove_host_list</span><span class="p">,</span> <span class="n">add_host_list</span><span class="p">,</span>
            <span class="n">new_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.modify_host_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_host_group">[docs]</a>    <span class="k">def</span> <span class="nf">modify_host_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_group_id</span><span class="p">,</span> <span class="n">host_flag_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">remove_host_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_host_list</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">new_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an existing host group.</span>

<span class="sd">        Only one parameter can be modified at a time.</span>

<span class="sd">        :param host_group_id: name of the host group -- str</span>
<span class="sd">        :param host_flag_dict: host flags -- dict</span>
<span class="sd">        :param remove_host_list: hosts to be removed -- list</span>
<span class="sd">        :param add_host_list: hosts to be added -- list</span>
<span class="sd">        :param new_name: new name of the host group -- str</span>
<span class="sd">        :returns: modified host group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">host_flag_dict</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;setHostGroupFlagsParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostFlags&#39;</span><span class="p">:</span> <span class="n">host_flag_dict</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">remove_host_list</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;removeHostParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="n">remove_host_list</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">add_host_list</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;addHostParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;host&#39;</span><span class="p">:</span> <span class="n">add_host_list</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">new_name</span><span class="p">:</span>
            <span class="n">edit_host_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editHostGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;renameHostGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;new_host_group_name&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">}}})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;No modify host group parameters chosen - please supply &#39;</span>
                   <span class="s1">&#39;one of the following: host_flag_dict, &#39;</span>
                   <span class="s1">&#39;remove_host_list, add_host_list, or new_name.&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOSTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_group_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">edit_host_data</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.delete_host_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_hostgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a given host group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.delete_hostgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.delete_host_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Cannot delete if associated with a masking view.</span>

<span class="sd">        :param hostgroup_id: name of the hostgroup -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_host_group</span><span class="p">(</span><span class="n">hostgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.delete_host_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_host_group">[docs]</a>    <span class="k">def</span> <span class="nf">delete_host_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">host_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a given host group.</span>

<span class="sd">        Cannot delete if associated with a masking view.</span>

<span class="sd">        :param host_group_id: name of the hostgroup -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">HOSTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">host_group_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_initiator"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_initiator">[docs]</a>    <span class="k">def</span> <span class="nf">get_initiator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiator_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details of an initiator.</span>

<span class="sd">        :param initiator_id: initiator id -- str</span>
<span class="sd">        :returns: initiator details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">INITIATOR</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">initiator_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_initiator_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_initiator_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_initiator_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve initiator list from the array.</span>

<span class="sd">        :param params: optional params -- dict</span>
<span class="sd">        :returns: initiators -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">INITIATOR</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;initiatorId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.modify_initiator"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_initiator">[docs]</a>    <span class="k">def</span> <span class="nf">modify_initiator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiator_id</span><span class="p">,</span> <span class="n">remove_masking_entry</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">replace_init</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rename_alias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">set_fcid</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">initiator_flags</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an initiator.</span>

<span class="sd">        Only one parameter can be edited at a time.</span>

<span class="sd">        :param initiator_id: initiator id -- str</span>
<span class="sd">        :param remove_masking_entry: &#39;true&#39; or &#39;false&#39; -- str</span>
<span class="sd">        :param replace_init: new initiator id -- str</span>
<span class="sd">        :param rename_alias: (&#39;new node name&#39;, &#39;new port name&#39;) -- tuple</span>
<span class="sd">        :param set_fcid: fcid  -- str</span>
<span class="sd">        :param initiator_flags: initiator flags to set -- dict</span>
<span class="sd">        :returns: modified initiator details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">remove_masking_entry</span><span class="p">:</span>
            <span class="n">edit_init_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editInitiatorActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;removeMaskingEntry&#39;</span><span class="p">:</span> <span class="n">remove_masking_entry</span><span class="p">}})</span>
        <span class="k">elif</span> <span class="n">replace_init</span><span class="p">:</span>
            <span class="n">edit_init_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editInitiatorActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;replaceInitiatorParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;new_initiator&#39;</span><span class="p">:</span> <span class="n">replace_init</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">rename_alias</span><span class="p">:</span>
            <span class="n">edit_init_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editInitiatorActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;renameAliasParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;node_name&#39;</span><span class="p">:</span> <span class="n">rename_alias</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                     <span class="s1">&#39;port_name&#39;</span><span class="p">:</span> <span class="n">rename_alias</span><span class="p">[</span><span class="mi">1</span><span class="p">]}}})</span>
        <span class="k">elif</span> <span class="n">set_fcid</span><span class="p">:</span>
            <span class="n">edit_init_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editInitiatorActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;initiatorSetAttributesParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;fcidValue&#39;</span><span class="p">:</span> <span class="n">set_fcid</span><span class="p">}}})</span>
        <span class="k">elif</span> <span class="n">initiator_flags</span><span class="p">:</span>
            <span class="n">edit_init_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editInitiatorActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;initiatorSetFlagsParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;initiatorFlags&#39;</span><span class="p">:</span> <span class="n">initiator_flags</span><span class="p">}}})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;No modify initiator parameters chosen - please supply &#39;</span>
                   <span class="s1">&#39;one of the following: removeMaskingEntry, &#39;</span>
                   <span class="s1">&#39;replace_init, rename_alias, set_fcid, &#39;</span>
                   <span class="s1">&#39;initiator_flags.&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">INITIATOR</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">initiator_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">edit_init_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.is_initiator_in_host"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.is_initiator_in_host">[docs]</a>    <span class="k">def</span> <span class="nf">is_initiator_in_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check to see if a given initiator is already assigned to a host.</span>

<span class="sd">        :param initiator: the initiator ID -- str</span>
<span class="sd">        :returns: if initiator is assigned -- bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">init_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_in_use_initiator_list_from_array</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">init</span> <span class="ow">in</span> <span class="n">init_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">initiator</span> <span class="ow">in</span> <span class="n">init</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_in_use_initiator_list_from_array"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_in_use_initiator_list_from_array">[docs]</a>    <span class="k">def</span> <span class="nf">get_in_use_initiator_list_from_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the list of initiators which are in-use from the array.</span>

<span class="sd">        Gets the list of initiators from the array which are in</span>
<span class="sd">        hosts/ initiator groups.</span>

<span class="sd">        :returns: in-use initiators -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_initiator_list</span><span class="p">({</span><span class="s1">&#39;in_a_host&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_initiator_group_from_initiator"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_initiator_group_from_initiator">[docs]</a>    <span class="k">def</span> <span class="nf">get_initiator_group_from_initiator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given an initiator, get its corresponding initiator group, if any.</span>

<span class="sd">        :param initiator: the initiator id -- str</span>
<span class="sd">        :returns: found initiator group name -- str or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">init_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_initiator</span><span class="p">(</span><span class="n">initiator</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">init_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;host&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">init_details</span> <span class="k">else</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_view_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_view_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_view_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a masking view or list of masking views.</span>

<span class="sd">        See unisphere documentation for possible filters.</span>

<span class="sd">        :param filters: filters -- dict</span>
<span class="sd">        :returns: masking views -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maskingViewId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details of a masking view.</span>

<span class="sd">        :param masking_view_name: the masking view name -- str</span>
<span class="sd">        :returns: masking view details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">masking_view_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.create_masking_view_existing_components"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_masking_view_existing_components">[docs]</a>    <span class="k">def</span> <span class="nf">create_masking_view_existing_components</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">port_group_name</span><span class="p">,</span> <span class="n">masking_view_name</span><span class="p">,</span>
            <span class="n">storage_group_name</span><span class="p">,</span> <span class="n">host_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">host_group_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new masking view using existing groups.</span>

<span class="sd">        Must enter either a host name or a host group name, but not both.</span>

<span class="sd">        :param port_group_name: name of the port group -- str</span>
<span class="sd">        :param masking_view_name: name of the new masking view -- str</span>
<span class="sd">        :param storage_group_name: name of the storage group -- str</span>
<span class="sd">        :param host_name: name of the host (initiator group) -- str</span>
<span class="sd">        :param host_group_name: name of host group -- str</span>
<span class="sd">        :param _async: if command should be run asynchronously -- bool</span>
<span class="sd">        :returns: masking view details -- dict</span>
<span class="sd">        :raises: InvalidInputException</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">host_name</span><span class="p">:</span>
            <span class="n">host_details</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;useExistingHostParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hostId&#39;</span><span class="p">:</span> <span class="n">host_name</span><span class="p">}}</span>
        <span class="k">elif</span> <span class="n">host_group_name</span><span class="p">:</span>
            <span class="n">host_details</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;useExistingHostGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;hostGroupId&#39;</span><span class="p">:</span> <span class="n">host_group_name</span><span class="p">}})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Must enter either a host name or a host group name.&#39;</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span>
            <span class="s1">&#39;portGroupSelection&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;useExistingPortGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;portGroupId&#39;</span><span class="p">:</span> <span class="n">port_group_name</span><span class="p">}},</span>
            <span class="s1">&#39;maskingViewId&#39;</span><span class="p">:</span> <span class="n">masking_view_name</span><span class="p">,</span>
            <span class="s1">&#39;hostOrHostGroupSelection&#39;</span><span class="p">:</span> <span class="n">host_details</span><span class="p">,</span>
            <span class="s1">&#39;storageGroupSelection&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;useExistingStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="n">storage_group_name</span><span class="p">}}})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_views_from_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_views_from_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_views_from_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagegroup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return any masking views associated with a storage group.</span>

<span class="sd">        :param storagegroup: storage group name -- str</span>
<span class="sd">        :returns: masking view list -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">storagegroup</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maskingview&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">sg</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_masking_views_by_initiator_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_masking_views_by_host</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiatorgroup_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a host (initiator group), retrieve the masking view name.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_masking_views_by_host()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_masking_views_by_host(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Retrieve the list of masking views associated with the</span>
<span class="sd">        given initiator group.</span>

<span class="sd">        :param initiatorgroup_name: name of the initiator group -- str</span>
<span class="sd">        :returns: masking view names -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_views_by_initiator_group</span><span class="p">(</span><span class="n">initiatorgroup_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_views_by_initiator_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_views_by_initiator_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_views_by_initiator_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">initiator_group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a host (initiator group), retrieve the masking view name.</span>

<span class="sd">        Retrieve the list of masking views associated with the</span>
<span class="sd">        given initiator group.</span>

<span class="sd">        :param initiator_group_name: name of the initiator group -- str</span>
<span class="sd">        :returns: masking view names -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ig_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host</span><span class="p">(</span><span class="n">initiator_group_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ig_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maskingview&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">ig_details</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_element_from_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_element_from_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">get_element_from_masking_view</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">maskingview_name</span><span class="p">,</span> <span class="n">portgroup</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">storagegroup</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the name of the specified element from a masking view.</span>

<span class="sd">        :param maskingview_name: masking view name -- str</span>
<span class="sd">        :param portgroup: port group name -- str</span>
<span class="sd">        :param host: the host name -- str</span>
<span class="sd">        :param storagegroup: storage group name -- str</span>
<span class="sd">        :returns: specified element name -- str</span>
<span class="sd">        :raises: ResourceNotFoundException</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">element</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">masking_view_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view</span><span class="p">(</span><span class="n">maskingview_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">masking_view_details</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">portgroup</span><span class="p">:</span>
                <span class="n">element</span> <span class="o">=</span> <span class="n">masking_view_details</span><span class="p">[</span><span class="s1">&#39;portGroupId&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">host</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">masking_view_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hostId&#39;</span><span class="p">):</span>
                    <span class="n">element</span> <span class="o">=</span> <span class="n">masking_view_details</span><span class="p">[</span><span class="s1">&#39;hostId&#39;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">masking_view_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hostGroupId&#39;</span><span class="p">):</span>
                    <span class="n">element</span> <span class="o">=</span> <span class="n">masking_view_details</span><span class="p">[</span><span class="s1">&#39;hostGroupId&#39;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">storagegroup</span><span class="p">:</span>
                <span class="n">element</span> <span class="o">=</span> <span class="n">masking_view_details</span><span class="p">[</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exception_message</span> <span class="o">=</span> <span class="s1">&#39;Error retrieving masking group.&#39;</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">ResourceNotFoundException</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="n">exception_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">element</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_port_group_common_masking_views&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_common_masking_views</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_name</span><span class="p">,</span> <span class="n">ig_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get common masking views for a given port group and initiator group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_common_masking_views()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_port_group_common_masking_views(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_name: port group name -- str</span>
<span class="sd">        :param ig_name: initiator group name -- str</span>
<span class="sd">        :returns: masking views - list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group_common_masking_views</span><span class="p">(</span><span class="n">portgroup_name</span><span class="p">,</span>
                                                        <span class="n">ig_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_group_common_masking_views"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_group_common_masking_views">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_group_common_masking_views</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_name</span><span class="p">,</span>
                                            <span class="n">initiator_group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get common masking views for a given port group and initiator group.</span>

<span class="sd">        :param port_group_name: port group name -- str</span>
<span class="sd">        :param initiator_group_name: initiator group name -- str</span>
<span class="sd">        :returns: masking views - list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view_list</span><span class="p">(</span>
            <span class="p">{</span><span class="s1">&#39;port_group_name&#39;</span><span class="p">:</span> <span class="n">port_group_name</span><span class="p">,</span>
             <span class="s1">&#39;host_or_host_group_name&#39;</span><span class="p">:</span> <span class="n">initiator_group_name</span><span class="p">})</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.delete_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">delete_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskingview_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a masking view.</span>

<span class="sd">        :param maskingview_name: masking view name -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">maskingview_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.rename_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.rename_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">rename_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rename an existing masking view.</span>

<span class="sd">        Currently, the only supported modification is &quot;rename&quot;.</span>

<span class="sd">        :param masking_view_id: current name of the masking view -- str</span>
<span class="sd">        :param new_name: new name of the masking view -- str</span>
<span class="sd">        :returns: modified masking view details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mv_payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;editMaskingViewActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;renameMaskingViewParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;new_masking_view_name&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">}}}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">masking_view_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">mv_payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_host_from_masking_view&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_host_from_maskingview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated host or host group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_host_from_maskingview()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_host_from_masking_view(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param masking_view_id: name of the masking view -- str</span>
<span class="sd">        :returns: host id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_host_from_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_host_from_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_host_from_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">get_host_from_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated host or host group.</span>

<span class="sd">        :param masking_view_id: name of the masking view -- str</span>
<span class="sd">        :returns: host id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mv_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mv_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;hostId&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">mv_details</span> <span class="k">else</span> <span class="kc">None</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_storage_group_from_masking_view&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_storagegroup_from_maskingview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated storage group.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.get_storagegroup_from_maskingview() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_storage_group_from_masking_view(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param masking_view_id:  masking view name -- str</span>
<span class="sd">        :returns: name of the storage group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group_from_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_storage_group_from_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_storage_group_from_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_group_from_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated storage group.</span>

<span class="sd">        :param masking_view_id:  masking view name -- str</span>
<span class="sd">        :returns: name of the storage group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mv_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mv_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">mv_details</span> <span class="k">else</span> <span class="kc">None</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_port_group_from_masking_view&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_portgroup_from_maskingview</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated port group.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.get_portgroup_from_maskingview() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_port_group_from_masking_view(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param masking_view_id: masking view name -- str</span>
<span class="sd">        :returns: name of the port group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group_from_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_group_from_masking_view"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_group_from_masking_view">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_group_from_masking_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a masking view, get the associated port group.</span>

<span class="sd">        :param masking_view_id: masking view name -- str</span>
<span class="sd">        :returns: name of the port group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mv_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">mv_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;portGroupId&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">mv_details</span> <span class="k">else</span> <span class="kc">None</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_masking_view_connections&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_maskingview_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mv_name</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all connection information for a given masking view.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_maskingview_connections()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_masking_view_connections(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param mv_name: name of the masking view -- str</span>
<span class="sd">        :param filters: optional filter parameters -- dict</span>
<span class="sd">        :returns: masking view connection dicts -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view_connections</span><span class="p">(</span><span class="n">mv_name</span><span class="p">,</span> <span class="n">filters</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_view_connections"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_view_connections">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_view_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all connection information for a given masking view.</span>

<span class="sd">        :param masking_view_id: masking view id -- str</span>
<span class="sd">        :param filters: optional filter parameters -- dict</span>
<span class="sd">        :returns: masking view connection dicts -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">MASKINGVIEW</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">masking_view_id</span><span class="p">,</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">CONNECTIONS</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">&#39;maskingViewConnection&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.find_host_lun_id_for_volume&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">find_host_lun_id_for_vol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskingview</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find the host_lun_id for a volume in a masking view.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.find_host_lun_id_for_vol()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.find_host_lun_id_for_volume(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param maskingview: masking view name -- str</span>
<span class="sd">        :param device_id: the device id -- str</span>
<span class="sd">        :returns: host lun id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_host_lun_id_for_volume</span><span class="p">(</span><span class="n">maskingview</span><span class="p">,</span> <span class="n">device_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.find_host_lun_id_for_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.find_host_lun_id_for_volume">[docs]</a>    <span class="k">def</span> <span class="nf">find_host_lun_id_for_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">masking_view_id</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find the host_lun_id for a volume in a masking view.</span>

<span class="sd">        :param masking_view_id: masking view id -- str</span>
<span class="sd">        :param device_id: the device id -- str</span>
<span class="sd">        :returns: host lun id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">host_lun_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">filters</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;volume_id&#39;</span><span class="p">:</span> <span class="n">device_id</span><span class="p">}</span>
        <span class="n">connection_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_maskingview_connections</span><span class="p">(</span><span class="n">masking_view_id</span><span class="p">,</span>
                                                           <span class="n">filters</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">connection_info</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                <span class="s1">&#39;Cannot retrieve masking view connection information for &#39;</span>
                <span class="s1">&#39;</span><span class="si">{dev}</span><span class="s1"> in </span><span class="si">{mv}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dev</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">mv</span><span class="o">=</span><span class="n">masking_view_id</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">host_lun_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">connection_info</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;host_lun_address&#39;</span><span class="p">])</span>
                <span class="n">host_lun_id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">host_lun_id</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                    <span class="s1">&#39;Unable to retrieve connection information for volume &#39;</span>
                    <span class="s1">&#39;</span><span class="si">{vol}</span><span class="s1"> in masking view </span><span class="si">{mv}</span><span class="s1">. Exception received: &#39;</span>
                    <span class="s1">&#39;</span><span class="si">{exc}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vol</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">mv</span><span class="o">=</span><span class="n">masking_view_id</span><span class="p">,</span> <span class="n">exc</span><span class="o">=</span><span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">host_lun_id</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Query for a list of Symmetrix port keys.</span>

<span class="sd">        Note a mixture of Front end, back end and RDF port specific values</span>
<span class="sd">        are not allowed. See UniSphere documentation for possible values.</span>

<span class="sd">        :param filters: optional filters e.g. {&#39;vnx_attached&#39;: &#39;true&#39;} -- dict</span>
<span class="sd">        :returns: port key dicts -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORT</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span> <span class="s1">&#39;ProvisioningFunctions.get_port_group&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_portgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get port group details.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_portgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_port_group(). For further information please</span>
<span class="sd">        consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_id: name of the portgroup -- str</span>
<span class="sd">        :returns: port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get port group details.</span>

<span class="sd">        :param port_group_id: name of the portgroup -- str</span>
<span class="sd">        :returns: port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">port_group_id</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span> <span class="s1">&#39;ProvisioningFunctions.get_port_group_list&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_portgroup_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get port group details.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_portgroup_list() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_port_group_list(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param filters: optional filters -- dict</span>
<span class="sd">        :returns: port groups -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group_list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_port_group_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_port_group_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_port_group_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get port group details.</span>

<span class="sd">        :param filters: optional filters -- dict</span>
<span class="sd">        :returns: port groups -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;portGroupId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_ports_from_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_ports_from_pg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of port identifiers from a port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_ports_from_pg() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_ports_from_port_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup: name of the portgroup -- list</span>
<span class="sd">        :returns: port ids -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ports_from_port_group</span><span class="p">(</span><span class="n">portgroup</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_ports_from_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_ports_from_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_ports_from_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of port identifiers from a port group.</span>

<span class="sd">        :param port_group: name of the portgroup -- list</span>
<span class="sd">        :returns: port ids -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">port_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">port_group_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group</span><span class="p">(</span><span class="n">port_group</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port_group_info</span> <span class="ow">and</span> <span class="n">port_group_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">):</span>
            <span class="n">port_key</span> <span class="o">=</span> <span class="n">port_group_info</span><span class="p">[</span><span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">port_key</span><span class="p">:</span>
                <span class="n">port</span> <span class="o">=</span> <span class="n">key</span><span class="p">[</span><span class="s1">&#39;portId&#39;</span><span class="p">]</span>
                <span class="n">port_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">port_list</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_target_wwns_from_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_target_wwns_from_pg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the director ports&#39; WWNs.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_target_wwns_from_pg()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_target_wwns_from_port_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_id: the name of the port group -- str</span>
<span class="sd">        :returns: target_wwns -- target wwns for the port group -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_wwns_from_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_target_wwns_from_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_target_wwns_from_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_target_wwns_from_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the director ports&#39; WWNs.</span>

<span class="sd">        :param port_group_id: the name of the port group -- str</span>
<span class="sd">        :returns: target_wwns -- target wwns for the port group -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">target_wwns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">port_group_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_group</span><span class="p">(</span><span class="n">port_group_id</span><span class="p">)</span>
        <span class="n">dir_port_list</span> <span class="o">=</span> <span class="n">port_group_details</span><span class="p">[</span><span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">dir_port</span> <span class="ow">in</span> <span class="n">dir_port_list</span><span class="p">:</span>
            <span class="n">dir_id</span> <span class="o">=</span> <span class="n">dir_port</span><span class="p">[</span><span class="s1">&#39;directorId&#39;</span><span class="p">]</span>
            <span class="n">port_no</span> <span class="o">=</span> <span class="n">dir_port</span><span class="p">[</span><span class="s1">&#39;portId&#39;</span><span class="p">]</span>
            <span class="n">wwn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_port_identifier</span><span class="p">(</span><span class="n">dir_id</span><span class="p">,</span> <span class="n">port_no</span><span class="p">)</span>
            <span class="n">target_wwns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wwn</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">target_wwns</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_iscsi_ip_address_and_iqn"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_iscsi_ip_address_and_iqn">[docs]</a>    <span class="k">def</span> <span class="nf">get_iscsi_ip_address_and_iqn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the ip addresses from the director port.</span>

<span class="sd">        :param port_id: director port identifier -- str</span>
<span class="sd">        :returns: ip addresses, iqn --  list, str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ip_addresses</span><span class="p">,</span> <span class="n">iqn</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="kc">None</span>
        <span class="n">dir_id</span> <span class="o">=</span> <span class="n">port_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">port_no</span> <span class="o">=</span> <span class="n">port_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">port_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_director_port</span><span class="p">(</span><span class="n">dir_id</span><span class="p">,</span> <span class="n">port_no</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">port_details</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ip_addresses</span> <span class="o">=</span> <span class="n">port_details</span><span class="p">[</span><span class="s1">&#39;symmetrixPort&#39;</span><span class="p">][</span><span class="s1">&#39;ip_addresses&#39;</span><span class="p">]</span>
                <span class="n">iqn</span> <span class="o">=</span> <span class="n">port_details</span><span class="p">[</span><span class="s1">&#39;symmetrixPort&#39;</span><span class="p">][</span><span class="s1">&#39;identifier&#39;</span><span class="p">]</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Could not get IP address from director port&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ip_addresses</span><span class="p">,</span> <span class="n">iqn</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_portgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">,</span> <span class="n">director_id</span><span class="p">,</span> <span class="n">port_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.create_portgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_port_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_id: name of the new port group - str</span>
<span class="sd">        :param director_id: director id -- str</span>
<span class="sd">        :param port_id: port id -- str</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">,</span> <span class="n">director_id</span><span class="p">,</span> <span class="n">port_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">,</span> <span class="n">director_id</span><span class="p">,</span> <span class="n">port_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new port group.</span>

<span class="sd">        :param port_group_id: name of the new port group - str</span>
<span class="sd">        :param director_id: director id -- str</span>
<span class="sd">        :param port_id: port id -- str</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;portGroupId&#39;</span><span class="p">:</span> <span class="n">port_group_id</span><span class="p">,</span>
                    <span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;directorId&#39;</span><span class="p">:</span> <span class="n">director_id</span><span class="p">,</span>
                                          <span class="s1">&#39;portId&#39;</span><span class="p">:</span> <span class="n">port_id</span><span class="p">}]})</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_port_group_port_ids</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_multiport_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_multiport_portgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.create_multiport_portgroup()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_multiport_port_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_id: name of the new port group -- str</span>
<span class="sd">        :param ports: port dicts Example:</span>
<span class="sd">                      [{&#39;directorId&#39;: director_id, &#39;portId&#39;: port_id}] -- list</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_multiport_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">,</span> <span class="n">ports</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_multiport_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_multiport_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_multiport_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">,</span> <span class="n">ports</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new port group.</span>

<span class="sd">        :param port_group_id: name of the new port group -- str</span>
<span class="sd">        :param ports: port dicts Example:</span>
<span class="sd">                      [{&#39;directorId&#39;: director_id, &#39;portId&#39;: port_id}] -- list</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;portGroupId&#39;</span><span class="p">:</span> <span class="n">port_group_id</span><span class="p">,</span>
                    <span class="s1">&#39;symmetrixPortKey&#39;</span><span class="p">:</span> <span class="n">ports</span><span class="p">})</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_port_group_port_ids</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_port_group_from_file&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_portgroup_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a file with director:port pairs, create a port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.create_portgroup_from_file()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_port_group_from_file(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Each director:port pair must be on a new line.</span>
<span class="sd">        Example director:port - FA-1D:4.</span>

<span class="sd">        :param file_name: path to the file -- str</span>
<span class="sd">        :param portgroup_id: name for the port group -- str</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_port_group_from_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_port_group_from_file"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_port_group_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">create_port_group_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a file with director:port pairs, create a portgroup.</span>

<span class="sd">        Each director:port pair must be on a new line.</span>
<span class="sd">        Example director:port - FA-1D:4.</span>

<span class="sd">        :param file_name: path to the file -- str</span>
<span class="sd">        :param port_group_id: name for the port group -- str</span>
<span class="sd">        :returns: new port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">port_list</span> <span class="o">=</span> <span class="n">file_handler</span><span class="o">.</span><span class="n">create_list_from_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
        <span class="n">combined_payload</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">port_list</span><span class="p">:</span>
            <span class="n">current_director_id</span><span class="p">,</span> <span class="n">current_port_id</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
            <span class="n">temp_list</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;directorId&#39;</span><span class="p">:</span> <span class="n">current_director_id</span><span class="p">,</span>
                         <span class="s1">&#39;portId&#39;</span><span class="p">:</span> <span class="n">current_port_id</span><span class="p">}</span>
            <span class="n">combined_payload</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_list</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_multiport_portgroup</span><span class="p">(</span><span class="n">port_group_id</span><span class="p">,</span> <span class="n">combined_payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.modify_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">modify_portgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">,</span> <span class="n">remove_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                         <span class="n">rename_portgroup</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an existing port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.modify_portgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.modify_port_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Only one parameter can be modified at a time.</span>

<span class="sd">        :param portgroup_id: name of the port group -- str</span>
<span class="sd">        :param remove_port: port details (director_id, port_id) -- tuple</span>
<span class="sd">        :param add_port: port details (director_id, port_id) -- tuple</span>
<span class="sd">        :param rename_portgroup: new port group name -- str</span>
<span class="sd">        :returns: modified port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">,</span> <span class="n">remove_port</span><span class="p">,</span> <span class="n">add_port</span><span class="p">,</span>
                                      <span class="n">rename_portgroup</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.modify_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">modify_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">,</span> <span class="n">remove_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_port</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                          <span class="n">rename_port_group</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an existing port group.</span>

<span class="sd">        Only one parameter can be modified at a time.</span>

<span class="sd">        :param port_group_id: name of the port group -- str</span>
<span class="sd">        :param remove_port: port details (director_id, port_id) -- tuple</span>
<span class="sd">        :param add_port: port details (director_id, port_id) -- tuple</span>
<span class="sd">        :param rename_port_group: new port group name -- str</span>
<span class="sd">        :returns: modified port group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">remove_port</span><span class="p">:</span>
            <span class="n">edit_pg_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editPortGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;removePortParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;directorId&#39;</span><span class="p">:</span> <span class="n">remove_port</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                          <span class="s1">&#39;portId&#39;</span><span class="p">:</span> <span class="n">remove_port</span><span class="p">[</span><span class="mi">1</span><span class="p">]}]}}})</span>
        <span class="k">elif</span> <span class="n">add_port</span><span class="p">:</span>
            <span class="n">edit_pg_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editPortGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;addPortParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;directorId&#39;</span><span class="p">:</span> <span class="n">add_port</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                          <span class="s1">&#39;portId&#39;</span><span class="p">:</span> <span class="n">add_port</span><span class="p">[</span><span class="mi">1</span><span class="p">]}]}}})</span>
        <span class="k">elif</span> <span class="n">rename_port_group</span><span class="p">:</span>
            <span class="n">edit_pg_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editPortGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;renamePortGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;new_port_group_name&#39;</span><span class="p">:</span> <span class="n">rename_port_group</span><span class="p">}}})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;No modify portgroup parameters set - please set one &#39;</span>
                       <span class="s1">&#39;of the following: remove_port, add_port, or &#39;</span>
                       <span class="s1">&#39;rename_portgroup.&#39;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">message</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">port_group_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">edit_pg_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">add_port</span> <span class="ow">or</span> <span class="n">remove_port</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_port_group_port_ids</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.delete_port_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_portgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">portgroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a port group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.delete_portgroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.delete_port_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param portgroup_id: name of the port group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_port_group</span><span class="p">(</span><span class="n">portgroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.delete_port_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_port_group">[docs]</a>    <span class="k">def</span> <span class="nf">delete_port_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a port group.</span>

<span class="sd">        :param port_group_id: name of the port group -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">PORTGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">port_group_id</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_service_level_list&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_slo_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the list of service levels from the array.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_slo_list() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_service_level_list(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param filters: optional filters -- dict</span>
<span class="sd">        :returns: service level names -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_service_level_list</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_service_level_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_service_level_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_service_level_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve the list of service levels from the array.</span>

<span class="sd">        :param filters: optional filters -- dict</span>
<span class="sd">        :returns: service level names -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">slo_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SLO</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">slo_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;sloId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">slo_dict</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_service_level&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_slo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slo_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a specific service level.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_slo() will be refactored</span>
<span class="sd">        in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_service_level(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param slo_id: service level agreement -- str</span>
<span class="sd">        :returns: service level details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_service_level</span><span class="p">(</span><span class="n">slo_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_service_level"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_service_level">[docs]</a>    <span class="k">def</span> <span class="nf">get_service_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_level_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a specific service level.</span>

<span class="sd">        :param service_level_id: service level agreement -- str</span>
<span class="sd">        :returns: service level details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SLO</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">service_level_id</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.modify_service_level&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">modify_slo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">slo_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an SLO.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.modify_slo() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.modify_service_level(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Currently, the only modification permitted is renaming.</span>

<span class="sd">        :param slo_id: current name of the service level -- str</span>
<span class="sd">        :param new_name: new name for the -- str</span>
<span class="sd">        :returns: modified service level details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_service_level</span><span class="p">(</span><span class="n">slo_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.modify_service_level"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_service_level">[docs]</a>    <span class="k">def</span> <span class="nf">modify_service_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_level_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify an SLO.</span>

<span class="sd">        Currently, the only modification permitted is renaming.</span>

<span class="sd">        :param service_level_id: current name of the service level -- str</span>
<span class="sd">        :param new_name: new name for the -- str</span>
<span class="sd">        :returns: modified service level details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">edit_slo_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editSloActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;renameSloParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;sloId&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">}}})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SLO</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">service_level_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">edit_slo_data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_srp"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_srp">[docs]</a>    <span class="k">def</span> <span class="nf">get_srp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srp</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get details on a specific SRP.</span>

<span class="sd">        :param srp: storage resource pool id -- str</span>
<span class="sd">        :returns: srp details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SRP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">srp</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_srp_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_srp_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_srp_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of available SRPs on a given array.</span>

<span class="sd">        :param filters: filter parameters -- dict</span>
<span class="sd">        :returns: SRPs -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SRP</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;srpId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_compressibility_report"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_compressibility_report">[docs]</a>    <span class="k">def</span> <span class="nf">get_compressibility_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a specified SRP Compressibility Report.</span>

<span class="sd">        :param srp_id: srp id -- str</span>
<span class="sd">        :returns: compressibility reports -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SRP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">srp_id</span><span class="p">,</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">COMPRESSIBILITY_REPORT</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s1">&#39;storageGroupCompressibility&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.is_compression_capable"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.is_compression_capable">[docs]</a>    <span class="k">def</span> <span class="nf">is_compression_capable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if array is compression capable.</span>

<span class="sd">        :returns: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">array_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">get_v3_or_newer_array_list</span><span class="p">(</span>
            <span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;compressionCapable&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>
        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">array_id</span> <span class="ow">in</span> <span class="n">array_list</span> <span class="k">else</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a name, return storage group details.</span>

<span class="sd">        :param storage_group_name: name of the storage group -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">STORAGEGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">storage_group_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_storage_group_demand_report"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_storage_group_demand_report">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_group_demand_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the storage group demand report.</span>

<span class="sd">        Get the storage group demand report from Unisphere.</span>

<span class="sd">        :param srp_id: id of the Storage Resource Pool -- str</span>
<span class="sd">        :returns: demand report -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">srp_id</span><span class="p">:</span>
            <span class="n">srp_id</span> <span class="o">=</span> <span class="s1">&#39;SRP_1&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">SRP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">srp_id</span><span class="p">,</span>
            <span class="n">resource</span><span class="o">=</span><span class="n">SG_DEMAND_REPORT</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_storage_group_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_storage_group_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_group_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of storage groups.</span>

<span class="sd">        :param filters: filter parameters -- dict</span>
<span class="sd">        :returns: storage groups -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">STORAGEGROUP</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">sg</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_masking_view_from_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_mv_from_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the associated masking views from a given storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_mv_from_sg() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_masking_view_from_storage_group(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param storage_group: name of the storage group -- str</span>
<span class="sd">        :returns: Masking views -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view_from_storage_group</span><span class="p">(</span><span class="n">storage_group</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_masking_view_from_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_masking_view_from_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_masking_view_from_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the associated masking views from a given storage group.</span>

<span class="sd">        :param storage_group: name of the storage group -- str</span>
<span class="sd">        :returns: Masking views -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">storage_group</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;maskingview&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">response</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_num_vols_in_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_num_vols_in_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the number of volumes in a storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_num_vols_in_sg() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_num_vols_in_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param storage_group_name: storage group name -- str</span>
<span class="sd">        :returns: number of volumes -- int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_num_vols_in_storage_group</span><span class="p">(</span><span class="n">storage_group_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_num_vols_in_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_num_vols_in_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_num_vols_in_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the number of volumes in a storage group.</span>

<span class="sd">        :param storage_group_name: storage group name -- str</span>
<span class="sd">        :returns: number of volumes -- int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">storage_group_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">sg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;num_of_vols&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="k">if</span> <span class="n">sg</span> <span class="k">else</span> <span class="mi">0</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.is_child_storage_group_in_parent_storage_group&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">is_child_sg_in_parent_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_name</span><span class="p">,</span> <span class="n">parent_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a child storage group is a member of a parent group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.is_child_sg_in_parent_sg()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.is_child_storage_group_in_parent_storage_group().</span>
<span class="sd">        For further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param child_name: child sg name -- str</span>
<span class="sd">        :param parent_name: parent sg name -- str</span>
<span class="sd">        :returns: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_child_storage_group_in_parent_storage_group</span><span class="p">(</span>
            <span class="n">child_name</span><span class="p">,</span> <span class="n">parent_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.is_child_storage_group_in_parent_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.is_child_storage_group_in_parent_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">is_child_storage_group_in_parent_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_name</span><span class="p">,</span>
                                                       <span class="n">parent_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check if a child storage group is a member of a parent group.</span>

<span class="sd">        :param child_name: child sg name -- str</span>
<span class="sd">        :param parent_name: parent sg name -- str</span>
<span class="sd">        :returns: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parent_sg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">parent_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parent_sg</span> <span class="ow">and</span> <span class="n">parent_sg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;child_storage_group&#39;</span><span class="p">):</span>
            <span class="n">child_sg_list</span> <span class="o">=</span> <span class="n">parent_sg</span><span class="p">[</span><span class="s1">&#39;child_storage_group&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">child_name</span> <span class="ow">in</span> <span class="n">child_sg_list</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_child_storage_groups_from_parent&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_child_sg_from_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get child storage group list from parent storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_child_sg_from_parent()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_child_storage_groups_from_parent(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param parent_name: parent sg name -- str</span>
<span class="sd">        :returns: child sg details -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_child_storage_groups_from_parent</span><span class="p">(</span><span class="n">parent_name</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_child_storage_groups_from_parent"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_child_storage_groups_from_parent">[docs]</a>    <span class="k">def</span> <span class="nf">get_child_storage_groups_from_parent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get child storage group list from parent storage group.</span>

<span class="sd">        :param parent_name: parent sg name -- str</span>
<span class="sd">        :returns: child sg details -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">parent_name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sg</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;child_storage_group&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">sg</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.create_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">slo</span><span class="p">,</span> <span class="n">workload</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                             <span class="n">do_disable_compression</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                             <span class="n">num_vols</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vol_size</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="n">cap_unit</span><span class="o">=</span><span class="s1">&#39;GB&#39;</span><span class="p">,</span>
                             <span class="n">allocate_full</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vol_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create the volume in the specified storage group.</span>

<span class="sd">        :param srp_id: SRP id -- str</span>
<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param slo: service level id -- str</span>
<span class="sd">        :param workload: workload id -- str</span>
<span class="sd">        :param do_disable_compression: disable compression -- bool</span>
<span class="sd">        :param num_vols: number of volumes to be created -- int</span>
<span class="sd">        :param vol_size: the volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :param allocate_full: allocate full capacity -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :param vol_name: name to give to the volume, optional -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">srp_id</span> <span class="o">=</span> <span class="n">srp_id</span> <span class="k">if</span> <span class="n">slo</span> <span class="k">else</span> <span class="s1">&#39;None&#39;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;srpId&#39;</span><span class="p">:</span> <span class="n">srp_id</span><span class="p">,</span>
                    <span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="n">sg_id</span><span class="p">,</span>
                    <span class="s1">&#39;emulation&#39;</span><span class="p">:</span> <span class="s1">&#39;FBA&#39;</span><span class="p">})</span>
        <span class="n">volume_attributes</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;volume_size&#39;</span><span class="p">:</span> <span class="n">vol_size</span><span class="p">,</span>
                             <span class="s1">&#39;capacityUnit&#39;</span><span class="p">:</span> <span class="n">cap_unit</span><span class="p">,</span>
                             <span class="s1">&#39;num_of_vols&#39;</span><span class="p">:</span> <span class="n">num_vols</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">vol_name</span><span class="p">:</span>
            <span class="n">volume_identifier</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;identifier_name&#39;</span><span class="p">:</span> <span class="n">vol_name</span><span class="p">,</span>
                                 <span class="s1">&#39;volumeIdentifierChoice&#39;</span><span class="p">:</span> <span class="s1">&#39;identifier_name&#39;</span><span class="p">}</span>
            <span class="n">volume_attributes</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;volumeIdentifier&#39;</span><span class="p">:</span> <span class="n">volume_identifier</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">slo</span><span class="p">:</span>
            <span class="n">slo_param</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sloId&#39;</span><span class="p">:</span> <span class="n">slo</span><span class="p">,</span>
                         <span class="s1">&#39;workloadSelection&#39;</span><span class="p">:</span> <span class="n">workload</span><span class="p">,</span>
                         <span class="s1">&#39;volumeAttributes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">volume_attributes</span><span class="p">]}</span>
            <span class="k">if</span> <span class="n">do_disable_compression</span><span class="p">:</span>
                <span class="n">slo_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;noCompression&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_compression_capable</span><span class="p">():</span>
                <span class="n">slo_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;noCompression&#39;</span><span class="p">:</span> <span class="s1">&#39;false&#39;</span><span class="p">})</span>

            <span class="k">if</span> <span class="n">allocate_full</span><span class="p">:</span>
                <span class="c1"># If case of full volume allocation, we must set the</span>
                <span class="c1"># noCompression parameter at true because fully</span>
                <span class="c1"># allocations and compression are exclusive parameters</span>
                <span class="n">slo_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;noCompression&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>
                <span class="n">slo_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;allocate_capacity_for_each_vol&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>
                <span class="n">slo_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;persist_preallocated_capacity_through_&#39;</span>
                                  <span class="s1">&#39;reclaim_or_copy&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">})</span>

            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;sloBasedStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">slo_param</span><span class="p">]})</span>

        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">STORAGEGROUP</span><span class="p">,</span> <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_non_empty_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_non_empty_storagegroup</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">slo</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span>
            <span class="n">cap_unit</span><span class="p">,</span> <span class="n">disable_compression</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new storage group with the specified volumes.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.create_non_empty_storagegroup() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_non_empty_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Generates a dictionary for json formatting and calls the create_sg</span>
<span class="sd">        function to create a new storage group with the specified volumes. Set</span>
<span class="sd">        the disable_compression flag for disabling compression on an All Flash</span>
<span class="sd">        array (where compression is on by default).</span>

<span class="sd">        :param srp_id: SRP id -- str</span>
<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param slo: service level id -- str</span>
<span class="sd">        :param workload: workload id -- str</span>
<span class="sd">        :param num_vols: number of volumes to be created -- int</span>
<span class="sd">        :param vol_size: the volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :param disable_compression: disable compression -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_non_empty_storage_group</span><span class="p">(</span>
            <span class="n">srp_id</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">slo</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">,</span>
            <span class="n">disable_compression</span><span class="p">,</span> <span class="n">_async</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_non_empty_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_non_empty_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_non_empty_storage_group</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">service_level</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span>
            <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">,</span> <span class="n">disable_compression</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new storage group with the specified volumes.</span>

<span class="sd">        Generates a dictionary for json formatting and calls the create_sg</span>
<span class="sd">        function to create a new storage group with the specified volumes. Set</span>
<span class="sd">        the disable_compression flag for disabling compression on an All Flash</span>
<span class="sd">        array (where compression is on by default).</span>

<span class="sd">        :param srp_id: SRP id -- str</span>
<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param service_level: service level id -- str</span>
<span class="sd">        :param workload: workload id -- str</span>
<span class="sd">        :param num_vols: number of volumes to be created -- int</span>
<span class="sd">        :param vol_size: the volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :param disable_compression: disable compression -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_storage_group</span><span class="p">(</span>
            <span class="n">srp_id</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">service_level</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span>
            <span class="n">do_disable_compression</span><span class="o">=</span><span class="n">disable_compression</span><span class="p">,</span>
            <span class="n">num_vols</span><span class="o">=</span><span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="o">=</span><span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="o">=</span><span class="n">cap_unit</span><span class="p">,</span>
            <span class="n">_async</span><span class="o">=</span><span class="n">_async</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_empty_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_empty_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">slo</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span>
                        <span class="n">disable_compression</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an empty storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.create_empty_sg() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_empty_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Set the disable_compression flag for disabling compression on an All</span>
<span class="sd">        Flash array (where compression is on by default).</span>

<span class="sd">        :param srp_id: SRP id -- str</span>
<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param slo: service level id -- str</span>
<span class="sd">        :param workload: workload id -- str</span>
<span class="sd">        :param disable_compression: disable compression -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_empty_storage_group</span><span class="p">(</span>
            <span class="n">srp_id</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">slo</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span> <span class="n">disable_compression</span><span class="p">,</span> <span class="n">_async</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_empty_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_empty_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">create_empty_storage_group</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">srp_id</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">service_level</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span>
            <span class="n">disable_compression</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an empty storage group.</span>

<span class="sd">        Set the disable_compression flag for disabling compression on an All</span>
<span class="sd">        Flash array (where compression is on by default).</span>

<span class="sd">        :param srp_id: SRP id -- str</span>
<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param service_level: service level id -- str</span>
<span class="sd">        :param workload: workload id -- str</span>
<span class="sd">        :param disable_compression: disable compression -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_storage_group</span><span class="p">(</span>
            <span class="n">srp_id</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">service_level</span><span class="p">,</span> <span class="n">workload</span><span class="p">,</span>
            <span class="n">do_disable_compression</span><span class="o">=</span><span class="n">disable_compression</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="n">_async</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.modify_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.modify_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">modify_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify a storage group.</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param payload: request payload -- dict</span>
<span class="sd">        :returns: modified storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">STORAGEGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">storage_group_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.add_existing_volume_to_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_existing_vol_to_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">vol_ids</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expand an existing storage group by adding existing volumes.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.add_existing_vol_to_sg() will</span>
<span class="sd">        be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.add_existing_volume_to_storage_group(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param vol_ids: volume device id(s) -- str or list</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_existing_volume_to_storage_group</span><span class="p">(</span>
            <span class="n">sg_id</span><span class="p">,</span> <span class="n">vol_ids</span><span class="p">,</span> <span class="n">_async</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.add_existing_volume_to_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.add_existing_volume_to_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">add_existing_volume_to_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">vol_ids</span><span class="p">,</span>
                                             <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expand an existing storage group by adding existing volumes.</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param vol_ids: volume device id(s) -- str or list</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vol_ids</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">vol_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">vol_ids</span><span class="p">]</span>
        <span class="n">add_vol_data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;expandStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;addSpecificVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;volumeId&#39;</span><span class="p">:</span> <span class="n">vol_ids</span><span class="p">}}}}</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">add_vol_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">storage_group_id</span><span class="p">,</span> <span class="n">add_vol_data</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.add_new_volume_to_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_new_vol_to_storagegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span>
                                    <span class="n">cap_unit</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">vol_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">create_new_volumes</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expand an existing storage group by adding new volumes.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.add_new_vol_to_storagegroup()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.add_new_volume_to_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param num_vols: number of volumes to be created -- int</span>
<span class="sd">        :param vol_size: the volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :param vol_name: name to give to the volume, optional -- str</span>
<span class="sd">        :param create_new_volumes: new volumes only, no re-use -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_new_volume_to_storage_group</span><span class="p">(</span>
            <span class="n">sg_id</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">,</span> <span class="n">_async</span><span class="p">,</span> <span class="n">vol_name</span><span class="p">,</span>
            <span class="n">create_new_volumes</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.add_new_volume_to_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.add_new_volume_to_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">add_new_volume_to_storage_group</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">num_vols</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">vol_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">create_new_volumes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote_array_1_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_array_1_sgs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote_array_2_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_array_2_sgs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Expand an existing storage group by adding new volumes.</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param num_vols: number of volumes to be created -- int</span>
<span class="sd">        :param vol_size: the volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :param vol_name: name to give to the volume, optional -- str</span>
<span class="sd">        :param create_new_volumes: new volumes only, no ro-use -- bool</span>
<span class="sd">        :param remote_array_1_id: 12 digit serial number of remote array,</span>
<span class="sd">               optional -- str</span>
<span class="sd">        :param remote_array_1_sgs: list of storage groups on remote array to</span>
<span class="sd">               add Remote device, Unisphere instance must be local to R1</span>
<span class="sd">               storage group otherwise volumes will only be added to the</span>
<span class="sd">               local group -- str or list</span>
<span class="sd">        :param remote_array2_id: optional digit serial number of remote array,</span>
<span class="sd">               only used in multihop SRDF, e.g. R11, or R1 - R21 - R2 optional</span>
<span class="sd">               -- str</span>
<span class="sd">        :param remote_array2_sgs: storage groups on remote array, optional</span>
<span class="sd">               -- str or list</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">add_volume_param</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;emulation&#39;</span><span class="p">:</span> <span class="s1">&#39;FBA&#39;</span><span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">create_new_volumes</span><span class="p">:</span>
            <span class="n">add_volume_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;create_new_volumes&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>

        <span class="n">volume_attributes</span> <span class="o">=</span> <span class="p">({</span>
            <span class="s1">&#39;num_of_vols&#39;</span><span class="p">:</span> <span class="n">num_vols</span><span class="p">,</span>
            <span class="s1">&#39;volume_size&#39;</span><span class="p">:</span> <span class="n">vol_size</span><span class="p">,</span>
            <span class="s1">&#39;capacityUnit&#39;</span><span class="p">:</span> <span class="n">cap_unit</span><span class="p">})</span>

        <span class="k">if</span> <span class="n">vol_name</span><span class="p">:</span>
            <span class="n">volume_identifier</span> <span class="o">=</span> <span class="p">({</span>
                <span class="s1">&#39;identifier_name&#39;</span><span class="p">:</span> <span class="n">vol_name</span><span class="p">,</span>
                <span class="s1">&#39;volumeIdentifierChoice&#39;</span><span class="p">:</span> <span class="s1">&#39;identifier_name&#39;</span>
            <span class="p">})</span>
            <span class="n">volume_attributes</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                <span class="s1">&#39;volumeIdentifier&#39;</span><span class="p">:</span> <span class="n">volume_identifier</span><span class="p">})</span>

        <span class="n">add_volume_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;volumeAttributes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">volume_attributes</span><span class="p">]})</span>

        <span class="n">expand_sg_data</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;expandStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;addVolumeParam&#39;</span><span class="p">:</span> <span class="n">add_volume_param</span><span class="p">}}})</span>
        <span class="k">if</span> <span class="n">remote_array_1_id</span> <span class="ow">and</span> <span class="n">remote_array_1_sgs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remote_array_1_sgs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">remote_array_1_sgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_array_1_sgs</span><span class="p">]</span>
            <span class="n">add_volume_param</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;remoteSymmSGInfoParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;remote_symmetrix_1_id&#39;</span><span class="p">:</span> <span class="n">remote_array_1_id</span><span class="p">,</span>
                <span class="s1">&#39;remote_symmetrix_1_sgs&#39;</span><span class="p">:</span> <span class="n">remote_array_1_sgs</span><span class="p">}})</span>
            <span class="k">if</span> <span class="n">remote_array_2_id</span> <span class="ow">and</span> <span class="n">remote_array_2_sgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remote_array_2_sgs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">remote_array_2_sgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_array_2_sgs</span><span class="p">]</span>
                <span class="n">add_volume_param</span><span class="p">[</span><span class="s1">&#39;remoteSymmSGInfoParam&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span>
                    <span class="s1">&#39;remote_symmetrix_2_id&#39;</span><span class="p">:</span> <span class="n">remote_array_2_id</span><span class="p">,</span>
                    <span class="s1">&#39;remote_symmetrix_2_sgs&#39;</span><span class="p">:</span> <span class="n">remote_array_2_sgs</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">expand_sg_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">storage_group_id</span><span class="p">,</span> <span class="n">expand_sg_data</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.remove_volume_from_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">remove_vol_from_storagegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sg_id</span><span class="p">,</span> <span class="n">vol_id</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a volume from a given storage group.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.remove_vol_from_storagegroup() will be refactored</span>
<span class="sd">        in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.remove_volume_from_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param sg_id: storage group id -- str</span>
<span class="sd">        :param vol_id: device id -- str</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_volume_from_storage_group</span><span class="p">(</span><span class="n">sg_id</span><span class="p">,</span> <span class="n">vol_id</span><span class="p">,</span> <span class="n">_async</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.remove_volume_from_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.remove_volume_from_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">remove_volume_from_storage_group</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">vol_id</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">remote_array_1_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote_array_1_sgs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">remote_array_2_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">remote_array_2_sgs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a volume from a given storage group.</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param vol_id: device id -- str</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :param remote_array_1_id: 12 digit serial number of remote array,</span>
<span class="sd">               optional -- str</span>
<span class="sd">        :param remote_array_1_sgs: list of storage groups on remote array to</span>
<span class="sd">               add Remote device, Unisphere instance must be local to R1</span>
<span class="sd">               storage group otherwise volumes will only be added to the</span>
<span class="sd">               local group -- str or list</span>
<span class="sd">        :param remote_array2_id: optional digit serial number of remote array,</span>
<span class="sd">               only used in multihop SRDF, e.g. R11, or R1 - R21 - R2 optional</span>
<span class="sd">               -- str</span>
<span class="sd">        :param remote_array2_sgs: storage groups on remote array, optional</span>
<span class="sd">               -- str or list</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vol_id</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">vol_id</span> <span class="o">=</span> <span class="p">[</span><span class="n">vol_id</span><span class="p">]</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;removeVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;volumeId&#39;</span><span class="p">:</span> <span class="n">vol_id</span><span class="p">}}})</span>

        <span class="k">if</span> <span class="n">remote_array_1_id</span> <span class="ow">and</span> <span class="n">remote_array_1_sgs</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remote_array_1_sgs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">remote_array_1_sgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_array_1_sgs</span><span class="p">]</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;removeVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;volumeId&#39;</span><span class="p">:</span> <span class="n">vol_id</span><span class="p">,</span>
                        <span class="s1">&#39;remoteSymmSGInfoParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s1">&#39;remote_symmetrix_1_id&#39;</span><span class="p">:</span> <span class="n">remote_array_1_id</span><span class="p">,</span>
                            <span class="s1">&#39;remote_symmetrix_1_sgs&#39;</span><span class="p">:</span> <span class="n">remote_array_1_sgs</span><span class="p">}}}</span>
                 <span class="p">})</span>
            <span class="k">if</span> <span class="n">remote_array_2_id</span> <span class="ow">and</span> <span class="n">remote_array_2_sgs</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">remote_array_2_sgs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">remote_array_2_sgs</span> <span class="o">=</span> <span class="p">[</span><span class="n">remote_array_2_sgs</span><span class="p">]</span>
                <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                    <span class="p">{</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                        <span class="s1">&#39;removeVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                            <span class="s1">&#39;volumeId&#39;</span><span class="p">:</span> <span class="n">vol_id</span><span class="p">,</span>
                            <span class="s1">&#39;remoteSymmSGInfoParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                                <span class="s1">&#39;remote_symmetrix_1_id&#39;</span><span class="p">:</span> <span class="n">remote_array_1_id</span><span class="p">,</span>
                                <span class="s1">&#39;remote_symmetrix_1_sgs&#39;</span><span class="p">:</span> <span class="n">remote_array_1_sgs</span><span class="p">,</span>
                                <span class="s1">&#39;remote_symmetrix_2_id&#39;</span><span class="p">:</span> <span class="n">remote_array_2_id</span><span class="p">,</span>
                                <span class="s1">&#39;remote_symmetrix_2_sgs&#39;</span><span class="p">:</span> <span class="n">remote_array_1_sgs</span>
                            <span class="p">}}}})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">storage_group_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.move_volumes_between_storage_groups"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.move_volumes_between_storage_groups">[docs]</a>    <span class="k">def</span> <span class="nf">move_volumes_between_storage_groups</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">device_ids</span><span class="p">,</span> <span class="n">source_storagegroup_name</span><span class="p">,</span>
            <span class="n">target_storagegroup_name</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Move volumes to a different storage group.</span>

<span class="sd">        Requires force set to True if volume is in a masking view.</span>

<span class="sd">        :param device_ids: volume device id(s) -- str or list</span>
<span class="sd">        :param source_storagegroup_name: originating storage group name -- str</span>
<span class="sd">        :param target_storagegroup_name: destination storage group name -- str</span>
<span class="sd">        :param force: force flag -- bool</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">force_flag</span> <span class="o">=</span> <span class="s1">&#39;true&#39;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s1">&#39;false&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device_ids</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">device_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">device_ids</span><span class="p">]</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span>
            <span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;moveVolumeToStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;volumeId&#39;</span><span class="p">:</span> <span class="n">device_ids</span><span class="p">,</span>
                    <span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="n">target_storagegroup_name</span><span class="p">,</span>
                    <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="n">force_flag</span><span class="p">}}})</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">source_storagegroup_name</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.create_volume_from_storage_group_return_id&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_volume_from_sg_return_dev_id</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">volume_name</span><span class="p">,</span> <span class="n">storagegroup_name</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="o">=</span><span class="s1">&#39;GB&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new volume in the given storage group.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.create_volume_from_sg_return_dev_id() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.create_volume_from_storage_group_return_id(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param volume_name: volume name -- str</span>
<span class="sd">        :param storagegroup_name: storage group id -- str</span>
<span class="sd">        :param vol_size: volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :returns: device id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_volume_from_storage_group_return_id</span><span class="p">(</span>
            <span class="n">volume_name</span><span class="p">,</span> <span class="n">storagegroup_name</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.create_volume_from_storage_group_return_id"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.create_volume_from_storage_group_return_id">[docs]</a>    <span class="k">def</span> <span class="nf">create_volume_from_storage_group_return_id</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">volume_name</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="o">=</span><span class="s1">&#39;GB&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new volume in the given storage group.</span>

<span class="sd">        :param volume_name: volume name -- str</span>
<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param vol_size: volume size -- str</span>
<span class="sd">        :param cap_unit: capacity unit (MB, GB, TB, CYL) -- str</span>
<span class="sd">        :returns: device id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">job</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_new_volume_to_storage_group</span><span class="p">(</span>
            <span class="n">storage_group_id</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">vol_size</span><span class="p">,</span> <span class="n">cap_unit</span><span class="p">,</span>
            <span class="n">_async</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">vol_name</span><span class="o">=</span><span class="n">volume_name</span><span class="p">)</span>

        <span class="n">task</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">wait_for_job</span><span class="p">(</span><span class="s1">&#39;Create volume from storage group&#39;</span><span class="p">,</span>
                                        <span class="mi">202</span><span class="p">,</span> <span class="n">job</span><span class="p">)</span>

        <span class="c1"># Find the newly created volume.</span>
        <span class="n">device_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">task</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">task</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">desc</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">CREATE_VOL_STRING</span> <span class="ow">in</span> <span class="n">desc</span><span class="p">:</span>
                        <span class="n">t_list</span> <span class="o">=</span> <span class="n">desc</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                        <span class="n">device_id</span> <span class="o">=</span> <span class="n">t_list</span><span class="p">[(</span><span class="nb">len</span><span class="p">(</span><span class="n">t_list</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
                        <span class="n">device_id</span> <span class="o">=</span> <span class="n">device_id</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                        <span class="s1">&#39;Could not retrieve device id from job. Exception &#39;</span>
                        <span class="s1">&#39;received was </span><span class="si">{exc}</span><span class="s1">. Attempting retrieval by &#39;</span>
                        <span class="s1">&#39;volume_identifier.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exc</span><span class="o">=</span><span class="n">e</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">device_id</span><span class="p">:</span>
            <span class="n">device_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_volume_device_id</span><span class="p">(</span><span class="n">volume_name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">device_id</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.add_child_storage_group_to_parent_group&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_child_sg_to_parent_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_sg</span><span class="p">,</span> <span class="n">parent_sg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a storage group to a parent storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.add_child_sg_to_parent_sg()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.add_child_storage_group_to_parent_group(). For</span>
<span class="sd">        further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        This method adds an existing storage group to another storage</span>
<span class="sd">        group, i.e. cascaded storage groups.</span>

<span class="sd">        :param child_sg: child storage group id -- str</span>
<span class="sd">        :param parent_sg: parent storage group id -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_child_storage_group_to_parent_group</span><span class="p">(</span><span class="n">child_sg</span><span class="p">,</span>
                                                            <span class="n">parent_sg</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.add_child_storage_group_to_parent_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.add_child_storage_group_to_parent_group">[docs]</a>    <span class="k">def</span> <span class="nf">add_child_storage_group_to_parent_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_storage_group</span><span class="p">,</span>
                                                <span class="n">parent_storage_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a storage group to a parent storage group.</span>

<span class="sd">        This method adds an existing storage group to another storage</span>
<span class="sd">        group, i.e. cascaded storage groups.</span>

<span class="sd">        :param child_storage_group: child storage group id -- str</span>
<span class="sd">        :param parent_storage_group: parent storage group id -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;expandStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;addExistingStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">child_storage_group</span><span class="p">]}}}})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">parent_storage_group</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.remove_child_storage_group_from_parent_group&#39;</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">remove_child_sg_from_parent_sg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_sg</span><span class="p">,</span> <span class="n">parent_sg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a storage group from its parent storage group.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.remove_child_sg_from_parent_sg()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.remove_child_storage_group_from_parent_group().</span>
<span class="sd">        For further information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        This method removes a child storage group from its parent group.</span>

<span class="sd">        :param child_sg: child storage group id -- str</span>
<span class="sd">        :param parent_sg: parent storage group id -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">remove_child_storage_group_from_parent_group</span><span class="p">(</span><span class="n">child_sg</span><span class="p">,</span>
                                                                 <span class="n">parent_sg</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.remove_child_storage_group_from_parent_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.remove_child_storage_group_from_parent_group">[docs]</a>    <span class="k">def</span> <span class="nf">remove_child_storage_group_from_parent_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">child_storage_group</span><span class="p">,</span>
                                                     <span class="n">parent_storage_group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove a storage group from its parent storage group.</span>

<span class="sd">        This method removes a child storage group from its parent group.</span>

<span class="sd">        :param child_storage_group: child storage group id -- str</span>
<span class="sd">        :param parent_storage_group: parent storage group id -- str</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;removeStorageGroupParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">child_storage_group</span><span class="p">],</span> <span class="s1">&#39;force&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">}}})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">parent_storage_group</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.update_storage_group_qos&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update_storagegroup_qos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_name</span><span class="p">,</span> <span class="n">qos_specs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the storage group instance with QoS details.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.update_storagegroup_qos()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.update_storage_group_qos(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        If maxIOPS or maxMBPS is in qos_specs, then DistributionType can be</span>
<span class="sd">        modified in addition to maxIOPs or/and maxMBPS.</span>
<span class="sd">        If maxIOPS or maxMBPS is NOT in qos_specs, we check to see if either</span>
<span class="sd">        is set in Storage Group. If so, then DistributionType can be modified.</span>
<span class="sd">        Example qos specs:</span>
<span class="sd">        {&#39;maxIOPS&#39;: &#39;4000&#39;, &#39;maxMBPS&#39;: &#39;4000&#39;, &#39;DistributionType&#39;: &#39;Dynamic&#39;}</span>

<span class="sd">        :param storage_group_name: storage group id -- str</span>
<span class="sd">        :param qos_specs: qos specifications -- dict</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_storage_group_qos</span><span class="p">(</span><span class="n">storage_group_name</span><span class="p">,</span> <span class="n">qos_specs</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.update_storage_group_qos"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.update_storage_group_qos">[docs]</a>    <span class="k">def</span> <span class="nf">update_storage_group_qos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">,</span> <span class="n">qos_specs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the storage group instance with QoS details.</span>

<span class="sd">        If maxIOPS or maxMBPS is in qos_specs, then DistributionType can be</span>
<span class="sd">        modified in addition to maxIOPs or/and maxMBPS.</span>
<span class="sd">        If maxIOPS or maxMBPS is NOT in qos_specs, we check to see if either</span>
<span class="sd">        is set in Storage Group. If so, then DistributionType can be modified.</span>
<span class="sd">        Example qos specs:</span>
<span class="sd">        {&#39;maxIOPS&#39;: &#39;4000&#39;, &#39;maxMBPS&#39;: &#39;4000&#39;, &#39;DistributionType&#39;: &#39;Dynamic&#39;}</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        :param qos_specs: qos specifications -- dict</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sg_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group</span><span class="p">(</span><span class="n">storage_group_id</span><span class="p">)</span>
        <span class="n">sg_qos_details</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sg_max_iops</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sg_max_mbps</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sg_distribution_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">max_iops</span> <span class="o">=</span> <span class="s1">&#39;nolimit&#39;</span>
        <span class="n">max_mbps</span> <span class="o">=</span> <span class="s1">&#39;nolimit&#39;</span>
        <span class="n">distribution_type</span> <span class="o">=</span> <span class="s1">&#39;Never&#39;</span>
        <span class="n">property_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sg_qos_details</span> <span class="o">=</span> <span class="n">sg_details</span><span class="p">[</span><span class="s1">&#39;hostIOLimit&#39;</span><span class="p">]</span>
            <span class="n">sg_max_iops</span> <span class="o">=</span> <span class="n">sg_qos_details</span><span class="p">[</span><span class="s1">&#39;host_io_limit_io_sec&#39;</span><span class="p">]</span>
            <span class="n">sg_max_mbps</span> <span class="o">=</span> <span class="n">sg_qos_details</span><span class="p">[</span><span class="s1">&#39;host_io_limit_mb_sec&#39;</span><span class="p">]</span>
            <span class="n">sg_distribution_type</span> <span class="o">=</span> <span class="n">sg_qos_details</span><span class="p">[</span><span class="s1">&#39;dynamicDistribution&#39;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Unable to get storage group QoS details.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;maxIOPS&#39;</span> <span class="ow">in</span> <span class="n">qos_specs</span><span class="p">:</span>
            <span class="n">max_iops</span> <span class="o">=</span> <span class="n">qos_specs</span><span class="p">[</span><span class="s1">&#39;maxIOPS&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">max_iops</span> <span class="o">!=</span> <span class="n">sg_max_iops</span><span class="p">:</span>
                <span class="n">property_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_iops</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;maxMBPS&#39;</span> <span class="ow">in</span> <span class="n">qos_specs</span><span class="p">:</span>
            <span class="n">max_mbps</span> <span class="o">=</span> <span class="n">qos_specs</span><span class="p">[</span><span class="s1">&#39;maxMBPS&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">max_mbps</span> <span class="o">!=</span> <span class="n">sg_max_mbps</span><span class="p">:</span>
                <span class="n">property_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">max_mbps</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;DistributionType&#39;</span> <span class="ow">in</span> <span class="n">qos_specs</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="n">property_list</span> <span class="ow">or</span> <span class="n">sg_qos_details</span><span class="p">):</span>
            <span class="n">dynamic_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;never&#39;</span><span class="p">,</span> <span class="s1">&#39;onfailure&#39;</span><span class="p">,</span> <span class="s1">&#39;always&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">qos_specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DistributionType&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span>
                    <span class="ow">in</span> <span class="n">dynamic_list</span><span class="p">):</span>
                <span class="n">exception_message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="s1">&#39;Wrong Distribution type value </span><span class="si">{dt}</span><span class="s1"> entered. &#39;</span>
                    <span class="s1">&#39;Please enter one of: </span><span class="si">{dl}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">dt</span><span class="o">=</span><span class="n">qos_specs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DistributionType&#39;</span><span class="p">),</span>
                        <span class="n">dl</span><span class="o">=</span><span class="n">dynamic_list</span><span class="p">))</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">exception_message</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">InvalidInputException</span><span class="p">(</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">exception_message</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">distribution_type</span> <span class="o">=</span> <span class="n">qos_specs</span><span class="p">[</span><span class="s1">&#39;DistributionType&#39;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">distribution_type</span> <span class="o">!=</span> <span class="n">sg_distribution_type</span><span class="p">:</span>
                    <span class="n">property_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">distribution_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">property_list</span><span class="p">:</span>
            <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;editStorageGroupActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;setHostIOLimitsParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;host_io_limit_io_sec&#39;</span><span class="p">:</span> <span class="n">max_iops</span><span class="p">,</span>
                    <span class="s1">&#39;host_io_limit_mb_sec&#39;</span><span class="p">:</span> <span class="n">max_mbps</span><span class="p">,</span>
                    <span class="s1">&#39;dynamicDistribution&#39;</span><span class="p">:</span> <span class="n">distribution_type</span><span class="p">}}}</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modify_storage_group</span><span class="p">(</span><span class="n">storage_group_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">message</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.set_host_io_limit_iops_or_mbps"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.set_host_io_limit_iops_or_mbps">[docs]</a>    <span class="k">def</span> <span class="nf">set_host_io_limit_iops_or_mbps</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">storage_group</span><span class="p">,</span> <span class="n">iops</span><span class="p">,</span> <span class="n">dynamic_distribution</span><span class="p">,</span> <span class="n">mbps</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the Host IO Limits on an existing storage group.</span>

<span class="sd">        :param storage_group: storage group id -- str</span>
<span class="sd">        :param iops: IO per second, min Value 100, must be specified as</span>
<span class="sd">                     multiple of 100 -- int</span>
<span class="sd">        :param dynamic_distribution: &#39;Always&#39;, &#39;Never&#39;, &#39;OnFailure&#39; -- str</span>
<span class="sd">        :param mbps: MB per second, min Value 100, must be specified as</span>
<span class="sd">                     multiple of 100 -- int</span>
<span class="sd">        :returns: storage group details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qos_specs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;maxIOPS&#39;</span><span class="p">:</span> <span class="n">iops</span><span class="p">,</span>
                     <span class="s1">&#39;DistributionType&#39;</span><span class="p">:</span> <span class="n">dynamic_distribution</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">mbps</span><span class="p">:</span>
            <span class="n">qos_specs</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;maxMBPS&#39;</span><span class="p">:</span> <span class="n">mbps</span><span class="p">})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_storagegroup_qos</span><span class="p">(</span><span class="n">storage_group</span><span class="p">,</span> <span class="n">qos_specs</span><span class="p">)</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.delete_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_storagegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagegroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a given storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.delete_storagegroup()  will</span>
<span class="sd">        be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.delete_storage_group(). For further information</span>
<span class="sd">        please consult PyU4V 9.1 release notes.</span>

<span class="sd">        A storage group cannot be deleted if it is associated with a masking</span>
<span class="sd">        view.</span>

<span class="sd">        :param storagegroup_id: storage group id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_storage_group</span><span class="p">(</span><span class="n">storagegroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.delete_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">delete_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a given storage group.</span>

<span class="sd">        A storage group cannot be deleted if it is associated with a masking</span>
<span class="sd">        view.</span>

<span class="sd">        :param storage_group_id: storage group id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">STORAGEGROUP</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">storage_group_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_volume">[docs]</a>    <span class="k">def</span> <span class="nf">get_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a volume from array.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :returns: volume details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">VOLUME</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_volume_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_volume_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_volume_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of volumes from array.</span>

<span class="sd">        :param filters: filters parameters -- dict</span>
<span class="sd">        :returns: device ids -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vol_id_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">VOLUME</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">response</span> <span class="ow">and</span> <span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;count&#39;</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)):</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">]</span>
            <span class="n">max_page_size</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;maxPageSize&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_page_size</span><span class="p">):</span>
                <span class="n">total_iterations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="n">max_page_size</span><span class="p">)))</span>
                <span class="n">iterator_id</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">total_iterations</span><span class="p">):</span>
                    <span class="n">start</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">max_page_size</span> <span class="o">+</span> <span class="mi">1</span>
                    <span class="n">end</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">max_page_size</span>
                    <span class="k">if</span> <span class="n">end</span> <span class="o">&gt;</span> <span class="n">count</span><span class="p">:</span>
                        <span class="n">end</span> <span class="o">=</span> <span class="n">count</span>
                    <span class="n">vol_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">common</span><span class="o">.</span><span class="n">get_iterator_page_list</span><span class="p">(</span>
                        <span class="n">iterator_id</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">vol_page</span><span class="p">:</span>
                        <span class="n">vol_id_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vol</span><span class="p">[</span><span class="s1">&#39;volumeId&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s1">&#39;resultList&#39;</span><span class="p">][</span><span class="s1">&#39;result&#39;</span><span class="p">]:</span>
                    <span class="n">vol_id_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vol</span><span class="p">[</span><span class="s1">&#39;volumeId&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">vol_id_list</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_volume_effective_wwn_details&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_vol_effective_wwn_details_84</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vol_list</span><span class="p">,</span>
                                         <span class="n">output_file_name</span><span class="o">=</span><span class="s1">&#39;wwn_data.csv&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the effective wwn for a list of vols.</span>

<span class="sd">        DEPRECATION NOTICE:</span>
<span class="sd">        ProvisioningFunctions.get_vol_effective_wwn_details_84() will be</span>
<span class="sd">        refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_volume_effective_wwn_details(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        Get volume details for a list of volume device ids, and write results</span>
<span class="sd">        to a csv file.</span>

<span class="sd">        :param vol_list: device id(s) -- list</span>
<span class="sd">        :param output_file_name: name of the output file -- csv</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;volumeId&#39;</span><span class="p">,</span> <span class="s1">&#39;effective_wwn&#39;</span><span class="p">,</span> <span class="s1">&#39;wwn&#39;</span><span class="p">,</span> <span class="s1">&#39;has_effective_wwn&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;storageGroupId&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">device_id</span> <span class="ow">in</span> <span class="n">vol_list</span><span class="p">:</span>
            <span class="n">vol_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">device_id</span><span class="p">,</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;effective_wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;has_effective_wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">)])</span>

        <span class="n">file_handler</span><span class="o">.</span><span class="n">write_to_csv_file</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">output_file_name</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_volume_effective_wwn_details"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_volume_effective_wwn_details">[docs]</a>    <span class="k">def</span> <span class="nf">get_volume_effective_wwn_details</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vol_list</span><span class="p">,</span>
                                         <span class="n">output_file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the effective wwn for a list of vols.</span>

<span class="sd">        Get volume details for a list of volume device ids.</span>

<span class="sd">        :param vol_list: device id(s) -- list</span>
<span class="sd">        :param output_file_name: name of the output file -- str</span>
<span class="sd">        :returns: volume details list (nested) -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">device_id</span> <span class="ow">in</span> <span class="n">vol_list</span><span class="p">:</span>
            <span class="n">vol_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">device_id</span><span class="p">,</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;effective_wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;has_effective_wwn&#39;</span><span class="p">),</span>
                         <span class="n">vol_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">)])</span>

        <span class="k">if</span> <span class="n">output_file_name</span><span class="p">:</span>
            <span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;volume_id&#39;</span><span class="p">,</span> <span class="s1">&#39;effective_wwn&#39;</span><span class="p">,</span> <span class="s1">&#39;wwn&#39;</span><span class="p">,</span>
                            <span class="s1">&#39;has_effective_wwn&#39;</span><span class="p">,</span> <span class="s1">&#39;storage_group_id&#39;</span><span class="p">])</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">write_to_csv_file</span><span class="p">(</span><span class="n">file_name</span><span class="o">=</span><span class="n">output_file_name</span><span class="p">,</span>
                                           <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_volumes_from_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_vols_from_storagegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storagegroup_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve volume information associated with a given storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_vols_from_storagegroup()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_volumes_from_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param storagegroup_id: storage group id -- name</span>
<span class="sd">        :returns: device ids -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volumes_from_storage_group</span><span class="p">(</span><span class="n">storagegroup_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_volumes_from_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_volumes_from_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">get_volumes_from_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve volume information associated with a given storage group.</span>

<span class="sd">        :param storage_group_id: storage group id -- name</span>
<span class="sd">        :returns: device ids -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">:</span> <span class="n">storage_group_id</span><span class="p">}</span>
        <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Cannot find record for storage group </span><span class="si">{sg}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">sg</span><span class="o">=</span><span class="n">storage_group_id</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">volume_list</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.get_storage_group_from_volume&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">get_storagegroup_from_vol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vol_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve storage group information for a specified volume.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.get_storagegroup_from_vol()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.get_storage_group_from_volume(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param vol_id: device id -- str</span>
<span class="sd">        :returns: storage groups -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group_from_volume</span><span class="p">(</span><span class="n">vol_id</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.get_storage_group_from_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_storage_group_from_volume">[docs]</a>    <span class="k">def</span> <span class="nf">get_storage_group_from_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve storage group information for a specified volume.</span>

<span class="sd">        :param volume_id: device id -- str</span>
<span class="sd">        :returns: storage groups -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">volume_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;storageGroupId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">vol</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">refactoring_notice</span><span class="p">(</span>
        <span class="s1">&#39;ProvisioningFunctions&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ProvisioningFunctions.is_volume_in_storage_group&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">,</span> <span class="mi">93</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">is_volume_in_storagegroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">storagegroup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;See if a volume is a member of the given storage group.</span>

<span class="sd">        DEPRECATION NOTICE: ProvisioningFunctions.is_volume_in_storagegroup()</span>
<span class="sd">        will be refactored in PyU4V version 9.3 in favour of</span>
<span class="sd">        ProvisioningFunctions.is_volume_in_storage_group(). For further</span>
<span class="sd">        information please consult PyU4V 9.1 release notes.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :param storagegroup: storage group id -- str</span>
<span class="sd">        :returns: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_volume_in_storage_group</span><span class="p">(</span><span class="n">device_id</span><span class="p">,</span> <span class="n">storagegroup</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.is_volume_in_storage_group"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.is_volume_in_storage_group">[docs]</a>    <span class="k">def</span> <span class="nf">is_volume_in_storage_group</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">storage_group_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;See if a volume is a member of the given storage group.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :param storage_group_id: storage group id -- name</span>
<span class="sd">        :returns: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_vol_in_sg</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">sg_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storagegroup_from_vol</span><span class="p">(</span><span class="n">device_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">storage_group_id</span> <span class="ow">in</span> <span class="n">sg_list</span><span class="p">:</span>
            <span class="n">is_vol_in_sg</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">is_vol_in_sg</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.find_volume_device_id"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.find_volume_device_id">[docs]</a>    <span class="k">def</span> <span class="nf">find_volume_device_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">volume_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given a volume identifier, find the corresponding device_id.</span>

<span class="sd">        :param volume_name: the volume name -- str</span>
<span class="sd">        :returns: device id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">device_id</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;volume_identifier&#39;</span><span class="p">:</span> <span class="n">volume_name</span><span class="p">}</span>

        <span class="n">volume_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume_list</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">volume_list</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;Cannot find record for volume </span><span class="si">{vol}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">vol</span><span class="o">=</span><span class="n">volume_name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">volume_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">device_id</span> <span class="o">=</span> <span class="n">volume_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">device_id</span> <span class="o">=</span> <span class="n">volume_list</span>
                <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{vol}</span><span class="s1"> volume name is not unique, returning &#39;</span>
                            <span class="s1">&#39;a list of device ids&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vol</span><span class="o">=</span><span class="n">volume_name</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">device_id</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.find_volume_identifier"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.find_volume_identifier">[docs]</a>    <span class="k">def</span> <span class="nf">find_volume_identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the volume identifier of a volume.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :returns: volume identifier -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;volume_identifier&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span> <span class="n">vol</span> <span class="k">else</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_size_of_device_on_array"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_size_of_device_on_array">[docs]</a>    <span class="k">def</span> <span class="nf">get_size_of_device_on_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the size of the volume from the array.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :returns: size -- float</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">vol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vol</span> <span class="ow">and</span> <span class="n">vol</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cap_gb&#39;</span><span class="p">):</span>
            <span class="n">cap</span> <span class="o">=</span> <span class="n">vol</span><span class="p">[</span><span class="s1">&#39;cap_gb&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exception_message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s1">&#39;Unable to retrieve size of device </span><span class="si">{device_id}</span><span class="s1"> on the &#39;</span>
                <span class="s1">&#39;array&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">device_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">))</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">ResourceNotFoundException</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">exception_message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cap</span></div>

    <span class="k">def</span> <span class="nf">_modify_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Modify a volume.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :param payload: request payload -- dict</span>
<span class="sd">        :returns: volume details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">modify_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">VOLUME</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span>
            <span class="n">payload</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<div class="viewcode-block" id="ProvisioningFunctions.extend_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.extend_volume">[docs]</a>    <span class="k">def</span> <span class="nf">extend_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">new_size</span><span class="p">,</span> <span class="n">_async</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                      <span class="n">rdf_group_num</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Extend a volume.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :param new_size: the new size for the device -- int</span>
<span class="sd">        :param _async: if call should be async -- bool</span>
<span class="sd">        :param rdf_group_num: RDF group number to extend R2 device in same</span>
<span class="sd">                              operation -- int</span>
<span class="sd">        :returns: volume details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Extending device </span><span class="si">{dev}</span><span class="s1"> to </span><span class="si">{num}</span><span class="s1">GB.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">dev</span><span class="o">=</span><span class="n">device_id</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">new_size</span><span class="p">))</span>
        <span class="n">vol_attributes</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;expandVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;volumeAttribute&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;volume_size&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">new_size</span><span class="p">),</span> <span class="s1">&#39;capacityUnit&#39;</span><span class="p">:</span> <span class="s1">&#39;GB&#39;</span><span class="p">}}})</span>

        <span class="k">if</span> <span class="n">rdf_group_num</span><span class="p">:</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Extending </span><span class="si">{dev}</span><span class="s1"> RDF paired device using online device &#39;</span>
                     <span class="s1">&#39;expansion.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dev</span><span class="o">=</span><span class="n">device_id</span><span class="p">))</span>
            <span class="n">vol_attributes</span><span class="p">[</span><span class="s1">&#39;expandVolumeParam&#39;</span><span class="p">][</span><span class="s1">&#39;rdfGroupNumber&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">rdf_group_num</span><span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;editVolumeActionParam&#39;</span><span class="p">:</span> <span class="n">vol_attributes</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">_async</span><span class="p">:</span>
            <span class="n">payload</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">ASYNC_UPDATE</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modify_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.rename_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.rename_volume">[docs]</a>    <span class="k">def</span> <span class="nf">rename_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rename a volume.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :param new_name: new name for the volume -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">new_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vol_identifier_dict</span> <span class="o">=</span> <span class="p">({</span>
                <span class="s1">&#39;identifier_name&#39;</span><span class="p">:</span> <span class="n">new_name</span><span class="p">,</span>
                <span class="s1">&#39;volumeIdentifierChoice&#39;</span><span class="p">:</span> <span class="s1">&#39;identifier_name&#39;</span><span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vol_identifier_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;volumeIdentifierChoice&#39;</span><span class="p">:</span> <span class="s1">&#39;none&#39;</span><span class="p">}</span>
        <span class="n">rename_vol_payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editVolumeActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;modifyVolumeIdentifierParam&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;volumeIdentifier&#39;</span><span class="p">:</span> <span class="n">vol_identifier_dict</span><span class="p">}}})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modify_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">,</span> <span class="n">rename_vol_payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.deallocate_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.deallocate_volume">[docs]</a>    <span class="k">def</span> <span class="nf">deallocate_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Deallocate all tracks on a volume.</span>

<span class="sd">        Necessary before deletion. Please note that it is not possible</span>
<span class="sd">        to know exactly when a de-allocation is complete. This method</span>
<span class="sd">        will return when the array has accepted the request for de-allocation;</span>
<span class="sd">        the de-allocation itself happens as a background task on the array.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        :returns: volume details -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="p">({</span><span class="s1">&#39;editVolumeActionParam&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;freeVolumeParam&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;free_volume&#39;</span><span class="p">:</span> <span class="s1">&#39;true&#39;</span><span class="p">}}})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modify_volume</span><span class="p">(</span><span class="n">device_id</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.delete_volume"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.delete_volume">[docs]</a>    <span class="nd">@decorators</span><span class="o">.</span><span class="n">retry</span><span class="p">(</span><span class="n">exception</span><span class="o">.</span><span class="n">VolumeBackendAPIException</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">delete_volume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete a volume.</span>

<span class="sd">        :param device_id: device id -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delete_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">VOLUME</span><span class="p">,</span> <span class="n">resource_type_id</span><span class="o">=</span><span class="n">device_id</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.find_low_volume_utilization"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.find_low_volume_utilization">[docs]</a>    <span class="k">def</span> <span class="nf">find_low_volume_utilization</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">low_utilization_percentage</span><span class="p">,</span> <span class="n">csvname</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find volumes under a certain utilization threshold.</span>

<span class="sd">        Function to find volumes under a specified percentage, (e.g. find</span>
<span class="sd">        volumes with utilization less than 10%) - may be long running as will</span>
<span class="sd">        check all sg on array and all storage group.  Only identifies volumes</span>
<span class="sd">        in storage group,  note if volume is in more than one sg it may show up</span>
<span class="sd">        more than once.</span>

<span class="sd">        :param low_utilization_percentage: low utilization percent -- int</span>
<span class="sd">        :param csvname: filename for CSV output file -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sg_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_storage_group_list</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;sg_name&#39;</span><span class="p">,</span> <span class="s1">&#39;volume_id&#39;</span><span class="p">,</span> <span class="s1">&#39;identifier&#39;</span><span class="p">,</span> <span class="s1">&#39;capacity&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;allocated_percent&#39;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">sg</span> <span class="ow">in</span> <span class="n">sg_list</span><span class="p">:</span>
            <span class="n">vol_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_vols_from_storagegroup</span><span class="p">(</span><span class="n">sg</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">vol</span> <span class="ow">in</span> <span class="n">vol_list</span><span class="p">:</span>
                <span class="n">volume</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_volume</span><span class="p">(</span><span class="n">vol</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">volume</span><span class="p">[</span><span class="s1">&#39;allocated_percent&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">low_utilization_percentage</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;volume_identifier&#39;</span><span class="p">):</span>
                        <span class="n">vol_identifier</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;volume_identifier&#39;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">vol_identifier</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
                    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
                        <span class="n">sg</span><span class="p">,</span> <span class="n">vol</span><span class="p">,</span> <span class="n">vol_identifier</span><span class="p">,</span> <span class="n">volume</span><span class="p">[</span><span class="s1">&#39;cap_gb&#39;</span><span class="p">],</span>
                        <span class="n">volume</span><span class="p">[</span><span class="s1">&#39;allocated_percent&#39;</span><span class="p">]])</span>
        <span class="n">file_handler</span><span class="o">.</span><span class="n">write_to_csv_file</span><span class="p">(</span><span class="n">csvname</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_workload_settings"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_workload_settings">[docs]</a>    <span class="k">def</span> <span class="nf">get_workload_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get valid workload options from array.</span>

<span class="sd">        :returns: workload settings -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wl_details</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_resource</span><span class="p">(</span>
            <span class="n">category</span><span class="o">=</span><span class="n">SLOPROVISIONING</span><span class="p">,</span>
            <span class="n">resource_level</span><span class="o">=</span><span class="n">SYMMETRIX</span><span class="p">,</span> <span class="n">resource_level_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">array_id</span><span class="p">,</span>
            <span class="n">resource_type</span><span class="o">=</span><span class="n">WORKLOADTYPE</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wl_details</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;workloadId&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">())</span> <span class="k">if</span> <span class="n">wl_details</span> <span class="k">else</span> <span class="nb">list</span><span class="p">()</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_any_director_port"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_any_director_port">[docs]</a>    <span class="k">def</span> <span class="nf">get_any_director_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a non-GuestOS port from a director.</span>

<span class="sd">        :param director: director to search for ports with -- str</span>
<span class="sd">        :param filters: filters to apply when search for port -- str</span>
<span class="sd">        :returns: port -- int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_port</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">director</span> <span class="ow">and</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">DIRECTOR_SEARCH_PATTERN</span><span class="p">,</span> <span class="n">director</span><span class="p">):</span>
            <span class="n">port_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_director_port_list</span><span class="p">(</span>
                <span class="n">director</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="n">filters</span><span class="p">)</span>
            <span class="c1"># Avoid GOS ports</span>
            <span class="n">port_list</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">port_list</span> <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">constants</span><span class="o">.</span><span class="n">PORT_ID</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">port_list</span><span class="p">:</span>
                <span class="n">selected_port</span> <span class="o">=</span> <span class="n">port_list</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">constants</span><span class="o">.</span><span class="n">PORT_ID</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">selected_port</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.format_director_port"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.format_director_port">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">format_director_port</span><span class="p">(</span><span class="n">director</span><span class="p">,</span> <span class="n">port</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Format separate director port into single string.</span>

<span class="sd">        :param director: director e.g. FA-2D -- str</span>
<span class="sd">        :param port: port e.g. 4 -- str</span>
<span class="sd">        :returns: formatted director:port string --str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">{d}</span><span class="s1">:</span><span class="si">{p}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">director</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">port</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_active_masking_view_connections"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_active_masking_view_connections">[docs]</a>    <span class="k">def</span> <span class="nf">get_active_masking_view_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get list of active connections from any masking view.</span>

<span class="sd">        :returns: masking view name, connection details -- str, list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">masking_view_list</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view_list</span><span class="p">()</span>
        <span class="n">selected_masking_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">active_connections</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">masking_view</span> <span class="ow">in</span> <span class="n">masking_view_list</span><span class="p">:</span>
            <span class="n">masking_view_connections</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_masking_view_connections</span><span class="p">(</span><span class="n">masking_view</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">masking_view_connections</span><span class="p">:</span>
                <span class="n">selected_masking_view</span> <span class="o">=</span> <span class="n">masking_view</span>
                <span class="n">active_connections</span> <span class="o">=</span> <span class="n">masking_view_connections</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">selected_masking_view</span><span class="p">,</span> <span class="n">active_connections</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_fa_directors"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_fa_directors">[docs]</a>    <span class="k">def</span> <span class="nf">get_fa_directors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all FA directors on the array.</span>

<span class="sd">        :returns: fa director strings  -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">directors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_director_list</span><span class="p">()</span>
        <span class="n">fa_directors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">director</span> <span class="ow">in</span> <span class="n">directors</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;FA-&#39;</span> <span class="ow">in</span> <span class="n">director</span><span class="p">:</span>
                <span class="n">fa_directors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">director</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">fa_directors</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_available_initiator"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_available_initiator">[docs]</a>    <span class="k">def</span> <span class="nf">get_available_initiator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an available initiator.</span>

<span class="sd">        :param director_type: director type filter -- str</span>
<span class="sd">        :returns: single available initiator  -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">all_initiators_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_initiator_list</span><span class="p">())</span>
        <span class="n">in_use_initiators_set</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_in_use_initiator_list_from_array</span><span class="p">())</span>
        <span class="n">available_initiators</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">all_initiators_set</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span>
            <span class="n">in_use_initiators_set</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_initiators</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">return_initiator</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">director_type</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">initiator</span> <span class="ow">in</span> <span class="n">available_initiators</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">director_type</span> <span class="ow">in</span> <span class="n">initiator</span><span class="p">:</span>
                        <span class="n">return_initiator</span> <span class="o">=</span> <span class="n">initiator</span>
                        <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">return_initiator</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">available_initiators</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">return_initiator</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_in_use_initiator"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_in_use_initiator">[docs]</a>    <span class="k">def</span> <span class="nf">get_in_use_initiator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">director_type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an initiator that is in use.</span>

<span class="sd">        :param director_type: director type filter -- str</span>
<span class="sd">        :returns: single in-use initiator -- str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set manipulation introduces some unordered sorting</span>
        <span class="c1"># rather than directly passing back first item in in_use list.</span>
        <span class="n">initiators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_in_use_initiator_list_from_array</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initiators</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">return_initiator</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">director_type</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">initiator</span> <span class="ow">in</span> <span class="n">initiators</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">director_type</span> <span class="ow">in</span> <span class="n">initiator</span><span class="p">:</span>
                        <span class="n">return_initiator</span> <span class="o">=</span> <span class="n">initiator</span>
                        <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">return_initiator</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">initiators</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">return_initiator</span></div>

<div class="viewcode-block" id="ProvisioningFunctions.get_available_initiator_wwn_as_list"><a class="viewcode-back" href="../../PyU4V.html#PyU4V.provisioning.ProvisioningFunctions.get_available_initiator_wwn_as_list">[docs]</a>    <span class="k">def</span> <span class="nf">get_available_initiator_wwn_as_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an available initiator wwn string in a list.</span>

<span class="sd">        :returns: single available initiator wwn -- list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">available_initiator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_available_initiator</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">available_initiator</span><span class="p">:</span>
            <span class="n">available_initiator_wwn</span> <span class="o">=</span> <span class="n">available_initiator</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">available_initiator_wwn</span><span class="p">]</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_update_port_group_port_ids</span><span class="p">(</span><span class="n">port_group_details</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Given port_group_details, update the port id values if needed</span>

<span class="sd">        :param port_group_details: results from port group operations -- dict</span>
<span class="sd">        :returns: port_group_details with corrected symmetrix_port_key -- dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">SYMMETRIX_PORT_KEY</span>
        <span class="k">if</span> <span class="n">port_group_details</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">port_group_details</span><span class="p">:</span>
            <span class="n">symmetrix_port_key</span> <span class="o">=</span> <span class="n">port_group_details</span><span class="p">[</span>
                <span class="n">constants</span><span class="o">.</span><span class="n">SYMMETRIX_PORT_KEY</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">port_key</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">symmetrix_port_key</span><span class="p">):</span>
                <span class="n">port_id</span> <span class="o">=</span> <span class="n">port_key</span><span class="p">[</span><span class="n">constants</span><span class="o">.</span><span class="n">PORT_ID</span><span class="p">]</span>
                <span class="n">split_port_id</span> <span class="o">=</span> <span class="n">port_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">split_port_id</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">corrected_port_id</span> <span class="o">=</span> <span class="n">split_port_id</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">symmetrix_port_key</span><span class="p">[</span><span class="n">index</span><span class="p">][</span>
                        <span class="n">constants</span><span class="o">.</span><span class="n">PORT_ID</span><span class="p">]</span> <span class="o">=</span> <span class="n">corrected_port_id</span>
            <span class="n">port_group_details</span><span class="p">[</span>
                <span class="n">constants</span><span class="o">.</span><span class="n">SYMMETRIX_PORT_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="n">symmetrix_port_key</span>
        <span class="k">return</span> <span class="n">port_group_details</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019 Dell Inc. or its subsidiaries.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>